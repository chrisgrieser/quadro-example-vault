/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var Cl=Object.create;var Ut=Object.defineProperty;var Sl=Object.getOwnPropertyDescriptor;var kl=Object.getOwnPropertyNames;var Dl=Object.getPrototypeOf,Ml=Object.prototype.hasOwnProperty;var bl=(o,n)=>()=>(n||o((n={exports:{}}).exports,n),n.exports),Ol=(o,n)=>{for(var a in n)Ut(o,a,{get:n[a],enumerable:!0})},Rs=(o,n,a,l)=>{if(n&&typeof n=="object"||typeof n=="function")for(let c of kl(n))!Ml.call(o,c)&&c!==a&&Ut(o,c,{get:()=>n[c],enumerable:!(l=Sl(n,c))||l.enumerable});return o};var As=(o,n,a)=>(a=o!=null?Cl(Dl(o)):{},Rs(n||!o||!o.__esModule?Ut(a,"default",{value:o,enumerable:!0}):a,o)),El=o=>Rs(Ut({},"__esModule",{value:!0}),o);var Er=bl((Or,Je)=>{(function(o,n){typeof Or=="object"&&typeof Je<"u"?Je.exports=n():typeof define=="function"&&define.amd?define(n):o.moment=n()})(Or,function(){"use strict";var o;function n(){return o.apply(null,arguments)}function a(e){o=e}function l(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function c(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function f(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(u(e,t))return!1;return!0}function m(e){return e===void 0}function g(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function x(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function T(e,t){var r=[],s,i=e.length;for(s=0;s<i;++s)r.push(t(e[s],s));return r}function F(e,t){for(var r in t)u(t,r)&&(e[r]=t[r]);return u(t,"toString")&&(e.toString=t.toString),u(t,"valueOf")&&(e.valueOf=t.valueOf),e}function C(e,t,r,s){return gs(e,t,r,s,!0).utc()}function P(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function w(e){return e._pf==null&&(e._pf=P()),e._pf}var W;Array.prototype.some?W=Array.prototype.some:W=function(e){var t=Object(this),r=t.length>>>0,s;for(s=0;s<r;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};function Q(e){if(e._isValid==null){var t=w(e),r=W.call(t.parsedDateParts,function(i){return i!=null}),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict&&(s=s&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=s;else return s}return e._isValid}function $(e){var t=C(NaN);return e!=null?F(w(t),e):w(t).userInvalidated=!0,t}var re=n.momentProperties=[],R=!1;function fe(e,t){var r,s,i,d=re.length;if(m(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),m(t._i)||(e._i=t._i),m(t._f)||(e._f=t._f),m(t._l)||(e._l=t._l),m(t._strict)||(e._strict=t._strict),m(t._tzm)||(e._tzm=t._tzm),m(t._isUTC)||(e._isUTC=t._isUTC),m(t._offset)||(e._offset=t._offset),m(t._pf)||(e._pf=w(t)),m(t._locale)||(e._locale=t._locale),d>0)for(r=0;r<d;r++)s=re[r],i=t[s],m(i)||(e[s]=i);return e}function oe(e){fe(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),R===!1&&(R=!0,n.updateOffset(this),R=!1)}function q(e){return e instanceof oe||e!=null&&e._isAMomentObject!=null}function Ae(e){n.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function U(e,t){var r=!0;return F(function(){if(n.deprecationHandler!=null&&n.deprecationHandler(null,e),r){var s=[],i,d,h,v=arguments.length;for(d=0;d<v;d++){if(i="",typeof arguments[d]=="object"){i+=`
[`+d+"] ";for(h in arguments[0])u(arguments[0],h)&&(i+=h+": "+arguments[0][h]+", ");i=i.slice(0,-2)}else i=arguments[d];s.push(i)}Ae(e+`
Arguments: `+Array.prototype.slice.call(s).join("")+`
`+new Error().stack),r=!1}return t.apply(this,arguments)},t)}var Ue={};function Gr(e,t){n.deprecationHandler!=null&&n.deprecationHandler(e,t),Ue[e]||(Ae(t),Ue[e]=!0)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null;function le(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function Sn(e){var t,r;for(r in e)u(e,r)&&(t=e[r],le(t)?this[r]=t:this["_"+r]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function rr(e,t){var r=F({},e),s;for(s in t)u(t,s)&&(c(e[s])&&c(t[s])?(r[s]={},F(r[s],e[s]),F(r[s],t[s])):t[s]!=null?r[s]=t[s]:delete r[s]);for(s in e)u(e,s)&&!u(t,s)&&c(e[s])&&(r[s]=F({},r[s]));return r}function sr(e){e!=null&&this.set(e)}var nr;Object.keys?nr=Object.keys:nr=function(e){var t,r=[];for(t in e)u(e,t)&&r.push(t);return r};var kn={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Dn(e,t,r){var s=this._calendar[e]||this._calendar.sameElse;return le(s)?s.call(t,r):s}function de(e,t,r){var s=""+Math.abs(e),i=t-s.length,d=e>=0;return(d?r?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}var ir=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,wt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ar={},$e={};function _(e,t,r,s){var i=s;typeof s=="string"&&(i=function(){return this[s]()}),e&&($e[e]=i),t&&($e[t[0]]=function(){return de(i.apply(this,arguments),t[1],t[2])}),r&&($e[r]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function Mn(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function bn(e){var t=e.match(ir),r,s;for(r=0,s=t.length;r<s;r++)$e[t[r]]?t[r]=$e[t[r]]:t[r]=Mn(t[r]);return function(i){var d="",h;for(h=0;h<s;h++)d+=le(t[h])?t[h].call(i,e):t[h];return d}}function _t(e,t){return e.isValid()?(t=zr(t,e.localeData()),ar[t]=ar[t]||bn(t),ar[t](e)):e.localeData().invalidDate()}function zr(e,t){var r=5;function s(i){return t.longDateFormat(i)||i}for(wt.lastIndex=0;r>=0&&wt.test(e);)e=e.replace(wt,s),wt.lastIndex=0,r-=1;return e}var On={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function En(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.match(ir).map(function(s){return s==="MMMM"||s==="MM"||s==="DD"||s==="dddd"?s.slice(1):s}).join(""),this._longDateFormat[e])}var Pn="Invalid date";function Yn(){return this._invalidDate}var In="%d",Nn=/\d{1,2}/;function Ln(e){return this._ordinal.replace("%d",e)}var Wn={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Rn(e,t,r,s){var i=this._relativeTime[r];return le(i)?i(e,t,r,s):i.replace(/%d/i,e)}function An(e,t){var r=this._relativeTime[e>0?"future":"past"];return le(r)?r(t):r.replace(/%s/i,t)}var nt={};function H(e,t){var r=e.toLowerCase();nt[r]=nt[r+"s"]=nt[t]=e}function ee(e){return typeof e=="string"?nt[e]||nt[e.toLowerCase()]:void 0}function or(e){var t={},r,s;for(s in e)u(e,s)&&(r=ee(s),r&&(t[r]=e[s]));return t}var Kr={};function V(e,t){Kr[e]=t}function Un(e){var t=[],r;for(r in e)u(e,r)&&t.push({unit:r,priority:Kr[r]});return t.sort(function(s,i){return s.priority-i.priority}),t}function vt(e){return e%4===0&&e%100!==0||e%400===0}function te(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function k(e){var t=+e,r=0;return t!==0&&isFinite(t)&&(r=te(t)),r}function He(e,t){return function(r){return r!=null?(Zr(this,e,r),n.updateOffset(this,t),this):Ft(this,e)}}function Ft(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Zr(e,t,r){e.isValid()&&!isNaN(r)&&(t==="FullYear"&&vt(e.year())&&e.month()===1&&e.date()===29?(r=k(r),e._d["set"+(e._isUTC?"UTC":"")+t](r,e.month(),Mt(r,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](r))}function $n(e){return e=ee(e),le(this[e])?this[e]():this}function Hn(e,t){if(typeof e=="object"){e=or(e);var r=Un(e),s,i=r.length;for(s=0;s<i;s++)this[r[s].unit](e[r[s].unit])}else if(e=ee(e),le(this[e]))return this[e](t);return this}var qr=/\d/,J=/\d\d/,Jr=/\d{3}/,lr=/\d{4}/,xt=/[+-]?\d{6}/,Y=/\d\d?/,Xr=/\d\d\d\d?/,es=/\d\d\d\d\d\d?/,Tt=/\d{1,3}/,dr=/\d{1,4}/,Ct=/[+-]?\d{1,6}/,Ve=/\d+/,St=/[+-]?\d+/,Vn=/Z|[+-]\d\d:?\d\d/gi,kt=/Z|[+-]\d\d(?::?\d\d)?/gi,jn=/[+-]?\d+(\.\d{1,3})?/,it=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Dt;Dt={};function y(e,t,r){Dt[e]=le(t)?t:function(s,i){return s&&r?r:t}}function Bn(e,t){return u(Dt,e)?Dt[e](t._strict,t._locale):new RegExp(Qn(e))}function Qn(e){return X(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,r,s,i,d){return r||s||i||d}))}function X(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var cr={};function b(e,t){var r,s=t,i;for(typeof e=="string"&&(e=[e]),g(t)&&(s=function(d,h){h[t]=k(d)}),i=e.length,r=0;r<i;r++)cr[e[r]]=s}function at(e,t){b(e,function(r,s,i,d){i._w=i._w||{},t(r,i._w,i,d)})}function Gn(e,t,r){t!=null&&u(cr,e)&&cr[e](t,r._a,r,e)}var j=0,me=1,ce=2,A=3,se=4,pe=5,Pe=6,zn=7,Kn=8;function Zn(e,t){return(e%t+t)%t}var L;Array.prototype.indexOf?L=Array.prototype.indexOf:L=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Mt(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=Zn(t,12);return e+=(t-r)/12,r===1?vt(e)?29:28:31-r%7%2}_("M",["MM",2],"Mo",function(){return this.month()+1}),_("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),_("MMMM",0,0,function(e){return this.localeData().months(this,e)}),H("month","M"),V("month",8),y("M",Y),y("MM",Y,J),y("MMM",function(e,t){return t.monthsShortRegex(e)}),y("MMMM",function(e,t){return t.monthsRegex(e)}),b(["M","MM"],function(e,t){t[me]=k(e)-1}),b(["MMM","MMMM"],function(e,t,r,s){var i=r._locale.monthsParse(e,s,r._strict);i!=null?t[me]=i:w(r).invalidMonth=e});var qn="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ts="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),rs=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Jn=it,Xn=it;function ei(e,t){return e?l(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||rs).test(t)?"format":"standalone"][e.month()]:l(this._months)?this._months:this._months.standalone}function ti(e,t){return e?l(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[rs.test(t)?"format":"standalone"][e.month()]:l(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ri(e,t,r){var s,i,d,h=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)d=C([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(d,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(d,"").toLocaleLowerCase();return r?t==="MMM"?(i=L.call(this._shortMonthsParse,h),i!==-1?i:null):(i=L.call(this._longMonthsParse,h),i!==-1?i:null):t==="MMM"?(i=L.call(this._shortMonthsParse,h),i!==-1?i:(i=L.call(this._longMonthsParse,h),i!==-1?i:null)):(i=L.call(this._longMonthsParse,h),i!==-1?i:(i=L.call(this._shortMonthsParse,h),i!==-1?i:null))}function si(e,t,r){var s,i,d;if(this._monthsParseExact)return ri.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=C([2e3,s]),r&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!r&&!this._monthsParse[s]&&(d="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(d.replace(".",""),"i")),r&&t==="MMMM"&&this._longMonthsParse[s].test(e))return s;if(r&&t==="MMM"&&this._shortMonthsParse[s].test(e))return s;if(!r&&this._monthsParse[s].test(e))return s}}function ss(e,t){var r;if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=k(t);else if(t=e.localeData().monthsParse(t),!g(t))return e}return r=Math.min(e.date(),Mt(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,r),e}function ns(e){return e!=null?(ss(this,e),n.updateOffset(this,!0),this):Ft(this,"Month")}function ni(){return Mt(this.year(),this.month())}function ii(e){return this._monthsParseExact?(u(this,"_monthsRegex")||is.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(u(this,"_monthsShortRegex")||(this._monthsShortRegex=Jn),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function ai(e){return this._monthsParseExact?(u(this,"_monthsRegex")||is.call(this),e?this._monthsStrictRegex:this._monthsRegex):(u(this,"_monthsRegex")||(this._monthsRegex=Xn),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function is(){function e(h,v){return v.length-h.length}var t=[],r=[],s=[],i,d;for(i=0;i<12;i++)d=C([2e3,i]),t.push(this.monthsShort(d,"")),r.push(this.months(d,"")),s.push(this.months(d,"")),s.push(this.monthsShort(d,""));for(t.sort(e),r.sort(e),s.sort(e),i=0;i<12;i++)t[i]=X(t[i]),r[i]=X(r[i]);for(i=0;i<24;i++)s[i]=X(s[i]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}_("Y",0,0,function(){var e=this.year();return e<=9999?de(e,4):"+"+e}),_(0,["YY",2],0,function(){return this.year()%100}),_(0,["YYYY",4],0,"year"),_(0,["YYYYY",5],0,"year"),_(0,["YYYYYY",6,!0],0,"year"),H("year","y"),V("year",1),y("Y",St),y("YY",Y,J),y("YYYY",dr,lr),y("YYYYY",Ct,xt),y("YYYYYY",Ct,xt),b(["YYYYY","YYYYYY"],j),b("YYYY",function(e,t){t[j]=e.length===2?n.parseTwoDigitYear(e):k(e)}),b("YY",function(e,t){t[j]=n.parseTwoDigitYear(e)}),b("Y",function(e,t){t[j]=parseInt(e,10)});function ot(e){return vt(e)?366:365}n.parseTwoDigitYear=function(e){return k(e)+(k(e)>68?1900:2e3)};var as=He("FullYear",!0);function oi(){return vt(this.year())}function li(e,t,r,s,i,d,h){var v;return e<100&&e>=0?(v=new Date(e+400,t,r,s,i,d,h),isFinite(v.getFullYear())&&v.setFullYear(e)):v=new Date(e,t,r,s,i,d,h),v}function lt(e){var t,r;return e<100&&e>=0?(r=Array.prototype.slice.call(arguments),r[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function bt(e,t,r){var s=7+t-r,i=(7+lt(e,0,s).getUTCDay()-t)%7;return-i+s-1}function os(e,t,r,s,i){var d=(7+r-s)%7,h=bt(e,s,i),v=1+7*(t-1)+d+h,S,O;return v<=0?(S=e-1,O=ot(S)+v):v>ot(e)?(S=e+1,O=v-ot(e)):(S=e,O=v),{year:S,dayOfYear:O}}function dt(e,t,r){var s=bt(e.year(),t,r),i=Math.floor((e.dayOfYear()-s-1)/7)+1,d,h;return i<1?(h=e.year()-1,d=i+ge(h,t,r)):i>ge(e.year(),t,r)?(d=i-ge(e.year(),t,r),h=e.year()+1):(h=e.year(),d=i),{week:d,year:h}}function ge(e,t,r){var s=bt(e,t,r),i=bt(e+1,t,r);return(ot(e)-s+i)/7}_("w",["ww",2],"wo","week"),_("W",["WW",2],"Wo","isoWeek"),H("week","w"),H("isoWeek","W"),V("week",5),V("isoWeek",5),y("w",Y),y("ww",Y,J),y("W",Y),y("WW",Y,J),at(["w","ww","W","WW"],function(e,t,r,s){t[s.substr(0,1)]=k(e)});function di(e){return dt(e,this._week.dow,this._week.doy).week}var ci={dow:0,doy:6};function ui(){return this._week.dow}function hi(){return this._week.doy}function fi(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function mi(e){var t=dt(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}_("d",0,"do","day"),_("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),_("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),_("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),_("e",0,0,"weekday"),_("E",0,0,"isoWeekday"),H("day","d"),H("weekday","e"),H("isoWeekday","E"),V("day",11),V("weekday",11),V("isoWeekday",11),y("d",Y),y("e",Y),y("E",Y),y("dd",function(e,t){return t.weekdaysMinRegex(e)}),y("ddd",function(e,t){return t.weekdaysShortRegex(e)}),y("dddd",function(e,t){return t.weekdaysRegex(e)}),at(["dd","ddd","dddd"],function(e,t,r,s){var i=r._locale.weekdaysParse(e,s,r._strict);i!=null?t.d=i:w(r).invalidWeekday=e}),at(["d","e","E"],function(e,t,r,s){t[s]=k(e)});function pi(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function gi(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function ur(e,t){return e.slice(t,7).concat(e.slice(0,t))}var yi="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ls="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),wi="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),_i=it,vi=it,Fi=it;function xi(e,t){var r=l(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?ur(r,this._week.dow):e?r[e.day()]:r}function Ti(e){return e===!0?ur(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ci(e){return e===!0?ur(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Si(e,t,r){var s,i,d,h=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)d=C([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(d,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(d,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(d,"").toLocaleLowerCase();return r?t==="dddd"?(i=L.call(this._weekdaysParse,h),i!==-1?i:null):t==="ddd"?(i=L.call(this._shortWeekdaysParse,h),i!==-1?i:null):(i=L.call(this._minWeekdaysParse,h),i!==-1?i:null):t==="dddd"?(i=L.call(this._weekdaysParse,h),i!==-1||(i=L.call(this._shortWeekdaysParse,h),i!==-1)?i:(i=L.call(this._minWeekdaysParse,h),i!==-1?i:null)):t==="ddd"?(i=L.call(this._shortWeekdaysParse,h),i!==-1||(i=L.call(this._weekdaysParse,h),i!==-1)?i:(i=L.call(this._minWeekdaysParse,h),i!==-1?i:null)):(i=L.call(this._minWeekdaysParse,h),i!==-1||(i=L.call(this._weekdaysParse,h),i!==-1)?i:(i=L.call(this._shortWeekdaysParse,h),i!==-1?i:null))}function ki(e,t,r){var s,i,d;if(this._weekdaysParseExact)return Si.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=C([2e3,1]).day(s),r&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(d="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(d.replace(".",""),"i")),r&&t==="dddd"&&this._fullWeekdaysParse[s].test(e))return s;if(r&&t==="ddd"&&this._shortWeekdaysParse[s].test(e))return s;if(r&&t==="dd"&&this._minWeekdaysParse[s].test(e))return s;if(!r&&this._weekdaysParse[s].test(e))return s}}function Di(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=pi(e,this.localeData()),this.add(e-t,"d")):t}function Mi(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function bi(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=gi(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function Oi(e){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||hr.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(u(this,"_weekdaysRegex")||(this._weekdaysRegex=_i),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ei(e){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||hr.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(u(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=vi),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Pi(e){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||hr.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(u(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Fi),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function hr(){function e(G,Fe){return Fe.length-G.length}var t=[],r=[],s=[],i=[],d,h,v,S,O;for(d=0;d<7;d++)h=C([2e3,1]).day(d),v=X(this.weekdaysMin(h,"")),S=X(this.weekdaysShort(h,"")),O=X(this.weekdays(h,"")),t.push(v),r.push(S),s.push(O),i.push(v),i.push(S),i.push(O);t.sort(e),r.sort(e),s.sort(e),i.sort(e),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function fr(){return this.hours()%12||12}function Yi(){return this.hours()||24}_("H",["HH",2],0,"hour"),_("h",["hh",2],0,fr),_("k",["kk",2],0,Yi),_("hmm",0,0,function(){return""+fr.apply(this)+de(this.minutes(),2)}),_("hmmss",0,0,function(){return""+fr.apply(this)+de(this.minutes(),2)+de(this.seconds(),2)}),_("Hmm",0,0,function(){return""+this.hours()+de(this.minutes(),2)}),_("Hmmss",0,0,function(){return""+this.hours()+de(this.minutes(),2)+de(this.seconds(),2)});function ds(e,t){_(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}ds("a",!0),ds("A",!1),H("hour","h"),V("hour",13);function cs(e,t){return t._meridiemParse}y("a",cs),y("A",cs),y("H",Y),y("h",Y),y("k",Y),y("HH",Y,J),y("hh",Y,J),y("kk",Y,J),y("hmm",Xr),y("hmmss",es),y("Hmm",Xr),y("Hmmss",es),b(["H","HH"],A),b(["k","kk"],function(e,t,r){var s=k(e);t[A]=s===24?0:s}),b(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e}),b(["h","hh"],function(e,t,r){t[A]=k(e),w(r).bigHour=!0}),b("hmm",function(e,t,r){var s=e.length-2;t[A]=k(e.substr(0,s)),t[se]=k(e.substr(s)),w(r).bigHour=!0}),b("hmmss",function(e,t,r){var s=e.length-4,i=e.length-2;t[A]=k(e.substr(0,s)),t[se]=k(e.substr(s,2)),t[pe]=k(e.substr(i)),w(r).bigHour=!0}),b("Hmm",function(e,t,r){var s=e.length-2;t[A]=k(e.substr(0,s)),t[se]=k(e.substr(s))}),b("Hmmss",function(e,t,r){var s=e.length-4,i=e.length-2;t[A]=k(e.substr(0,s)),t[se]=k(e.substr(s,2)),t[pe]=k(e.substr(i))});function Ii(e){return(e+"").toLowerCase().charAt(0)==="p"}var Ni=/[ap]\.?m?\.?/i,Li=He("Hours",!0);function Wi(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}var us={calendar:kn,longDateFormat:On,invalidDate:Pn,ordinal:In,dayOfMonthOrdinalParse:Nn,relativeTime:Wn,months:qn,monthsShort:ts,week:ci,weekdays:yi,weekdaysMin:wi,weekdaysShort:ls,meridiemParse:Ni},N={},ct={},ut;function Ri(e,t){var r,s=Math.min(e.length,t.length);for(r=0;r<s;r+=1)if(e[r]!==t[r])return r;return s}function hs(e){return e&&e.toLowerCase().replace("_","-")}function Ai(e){for(var t=0,r,s,i,d;t<e.length;){for(d=hs(e[t]).split("-"),r=d.length,s=hs(e[t+1]),s=s?s.split("-"):null;r>0;){if(i=Ot(d.slice(0,r).join("-")),i)return i;if(s&&s.length>=r&&Ri(d,s)>=r-1)break;r--}t++}return ut}function Ui(e){return e.match("^[^/\\\\]*$")!=null}function Ot(e){var t=null,r;if(N[e]===void 0&&typeof Je<"u"&&Je&&Je.exports&&Ui(e))try{t=ut._abbr,r=require,r("./locale/"+e),ke(t)}catch{N[e]=null}return N[e]}function ke(e,t){var r;return e&&(m(t)?r=ye(e):r=mr(e,t),r?ut=r:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),ut._abbr}function mr(e,t){if(t!==null){var r,s=us;if(t.abbr=e,N[e]!=null)Gr("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=N[e]._config;else if(t.parentLocale!=null)if(N[t.parentLocale]!=null)s=N[t.parentLocale]._config;else if(r=Ot(t.parentLocale),r!=null)s=r._config;else return ct[t.parentLocale]||(ct[t.parentLocale]=[]),ct[t.parentLocale].push({name:e,config:t}),null;return N[e]=new sr(rr(s,t)),ct[e]&&ct[e].forEach(function(i){mr(i.name,i.config)}),ke(e),N[e]}else return delete N[e],null}function $i(e,t){if(t!=null){var r,s,i=us;N[e]!=null&&N[e].parentLocale!=null?N[e].set(rr(N[e]._config,t)):(s=Ot(e),s!=null&&(i=s._config),t=rr(i,t),s==null&&(t.abbr=e),r=new sr(t),r.parentLocale=N[e],N[e]=r),ke(e)}else N[e]!=null&&(N[e].parentLocale!=null?(N[e]=N[e].parentLocale,e===ke()&&ke(e)):N[e]!=null&&delete N[e]);return N[e]}function ye(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return ut;if(!l(e)){if(t=Ot(e),t)return t;e=[e]}return Ai(e)}function Hi(){return nr(N)}function pr(e){var t,r=e._a;return r&&w(e).overflow===-2&&(t=r[me]<0||r[me]>11?me:r[ce]<1||r[ce]>Mt(r[j],r[me])?ce:r[A]<0||r[A]>24||r[A]===24&&(r[se]!==0||r[pe]!==0||r[Pe]!==0)?A:r[se]<0||r[se]>59?se:r[pe]<0||r[pe]>59?pe:r[Pe]<0||r[Pe]>999?Pe:-1,w(e)._overflowDayOfYear&&(t<j||t>ce)&&(t=ce),w(e)._overflowWeeks&&t===-1&&(t=zn),w(e)._overflowWeekday&&t===-1&&(t=Kn),w(e).overflow=t),e}var Vi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ji=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Bi=/Z|[+-]\d\d(?::?\d\d)?/,Et=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],gr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Qi=/^\/?Date\((-?\d+)/i,Gi=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,zi={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function fs(e){var t,r,s=e._i,i=Vi.exec(s)||ji.exec(s),d,h,v,S,O=Et.length,G=gr.length;if(i){for(w(e).iso=!0,t=0,r=O;t<r;t++)if(Et[t][1].exec(i[1])){h=Et[t][0],d=Et[t][2]!==!1;break}if(h==null){e._isValid=!1;return}if(i[3]){for(t=0,r=G;t<r;t++)if(gr[t][1].exec(i[3])){v=(i[2]||" ")+gr[t][0];break}if(v==null){e._isValid=!1;return}}if(!d&&v!=null){e._isValid=!1;return}if(i[4])if(Bi.exec(i[4]))S="Z";else{e._isValid=!1;return}e._f=h+(v||"")+(S||""),wr(e)}else e._isValid=!1}function Ki(e,t,r,s,i,d){var h=[Zi(e),ts.indexOf(t),parseInt(r,10),parseInt(s,10),parseInt(i,10)];return d&&h.push(parseInt(d,10)),h}function Zi(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function qi(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Ji(e,t,r){if(e){var s=ls.indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(s!==i)return w(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function Xi(e,t,r){if(e)return zi[e];if(t)return 0;var s=parseInt(r,10),i=s%100,d=(s-i)/100;return d*60+i}function ms(e){var t=Gi.exec(qi(e._i)),r;if(t){if(r=Ki(t[4],t[3],t[2],t[5],t[6],t[7]),!Ji(t[1],r,e))return;e._a=r,e._tzm=Xi(t[8],t[9],t[10]),e._d=lt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),w(e).rfc2822=!0}else e._isValid=!1}function ea(e){var t=Qi.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(fs(e),e._isValid===!1)delete e._isValid;else return;if(ms(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:n.createFromInputFallback(e)}n.createFromInputFallback=U("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function je(e,t,r){return e??t??r}function ta(e){var t=new Date(n.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function yr(e){var t,r,s=[],i,d,h;if(!e._d){for(i=ta(e),e._w&&e._a[ce]==null&&e._a[me]==null&&ra(e),e._dayOfYear!=null&&(h=je(e._a[j],i[j]),(e._dayOfYear>ot(h)||e._dayOfYear===0)&&(w(e)._overflowDayOfYear=!0),r=lt(h,0,e._dayOfYear),e._a[me]=r.getUTCMonth(),e._a[ce]=r.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=s[t]=i[t];for(;t<7;t++)e._a[t]=s[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[A]===24&&e._a[se]===0&&e._a[pe]===0&&e._a[Pe]===0&&(e._nextDay=!0,e._a[A]=0),e._d=(e._useUTC?lt:li).apply(null,s),d=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[A]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==d&&(w(e).weekdayMismatch=!0)}}function ra(e){var t,r,s,i,d,h,v,S,O;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(d=1,h=4,r=je(t.GG,e._a[j],dt(I(),1,4).year),s=je(t.W,1),i=je(t.E,1),(i<1||i>7)&&(S=!0)):(d=e._locale._week.dow,h=e._locale._week.doy,O=dt(I(),d,h),r=je(t.gg,e._a[j],O.year),s=je(t.w,O.week),t.d!=null?(i=t.d,(i<0||i>6)&&(S=!0)):t.e!=null?(i=t.e+d,(t.e<0||t.e>6)&&(S=!0)):i=d),s<1||s>ge(r,d,h)?w(e)._overflowWeeks=!0:S!=null?w(e)._overflowWeekday=!0:(v=os(r,s,i,d,h),e._a[j]=v.year,e._dayOfYear=v.dayOfYear)}n.ISO_8601=function(){},n.RFC_2822=function(){};function wr(e){if(e._f===n.ISO_8601){fs(e);return}if(e._f===n.RFC_2822){ms(e);return}e._a=[],w(e).empty=!0;var t=""+e._i,r,s,i,d,h,v=t.length,S=0,O,G;for(i=zr(e._f,e._locale).match(ir)||[],G=i.length,r=0;r<G;r++)d=i[r],s=(t.match(Bn(d,e))||[])[0],s&&(h=t.substr(0,t.indexOf(s)),h.length>0&&w(e).unusedInput.push(h),t=t.slice(t.indexOf(s)+s.length),S+=s.length),$e[d]?(s?w(e).empty=!1:w(e).unusedTokens.push(d),Gn(d,s,e)):e._strict&&!s&&w(e).unusedTokens.push(d);w(e).charsLeftOver=v-S,t.length>0&&w(e).unusedInput.push(t),e._a[A]<=12&&w(e).bigHour===!0&&e._a[A]>0&&(w(e).bigHour=void 0),w(e).parsedDateParts=e._a.slice(0),w(e).meridiem=e._meridiem,e._a[A]=sa(e._locale,e._a[A],e._meridiem),O=w(e).era,O!==null&&(e._a[j]=e._locale.erasConvertYear(O,e._a[j])),yr(e),pr(e)}function sa(e,t,r){var s;return r==null?t:e.meridiemHour!=null?e.meridiemHour(t,r):(e.isPM!=null&&(s=e.isPM(r),s&&t<12&&(t+=12),!s&&t===12&&(t=0)),t)}function na(e){var t,r,s,i,d,h,v=!1,S=e._f.length;if(S===0){w(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<S;i++)d=0,h=!1,t=fe({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],wr(t),Q(t)&&(h=!0),d+=w(t).charsLeftOver,d+=w(t).unusedTokens.length*10,w(t).score=d,v?d<s&&(s=d,r=t):(s==null||d<s||h)&&(s=d,r=t,h&&(v=!0));F(e,r||t)}function ia(e){if(!e._d){var t=or(e._i),r=t.day===void 0?t.date:t.day;e._a=T([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(s){return s&&parseInt(s,10)}),yr(e)}}function aa(e){var t=new oe(pr(ps(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function ps(e){var t=e._i,r=e._f;return e._locale=e._locale||ye(e._l),t===null||r===void 0&&t===""?$({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),q(t)?new oe(pr(t)):(x(t)?e._d=t:l(r)?na(e):r?wr(e):oa(e),Q(e)||(e._d=null),e))}function oa(e){var t=e._i;m(t)?e._d=new Date(n.now()):x(t)?e._d=new Date(t.valueOf()):typeof t=="string"?ea(e):l(t)?(e._a=T(t.slice(0),function(r){return parseInt(r,10)}),yr(e)):c(t)?ia(e):g(t)?e._d=new Date(t):n.createFromInputFallback(e)}function gs(e,t,r,s,i){var d={};return(t===!0||t===!1)&&(s=t,t=void 0),(r===!0||r===!1)&&(s=r,r=void 0),(c(e)&&f(e)||l(e)&&e.length===0)&&(e=void 0),d._isAMomentObject=!0,d._useUTC=d._isUTC=i,d._l=r,d._i=e,d._f=t,d._strict=s,aa(d)}function I(e,t,r,s){return gs(e,t,r,s,!1)}var la=U("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=I.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:$()}),da=U("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=I.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:$()});function ys(e,t){var r,s;if(t.length===1&&l(t[0])&&(t=t[0]),!t.length)return I();for(r=t[0],s=1;s<t.length;++s)(!t[s].isValid()||t[s][e](r))&&(r=t[s]);return r}function ca(){var e=[].slice.call(arguments,0);return ys("isBefore",e)}function ua(){var e=[].slice.call(arguments,0);return ys("isAfter",e)}var ha=function(){return Date.now?Date.now():+new Date},ht=["year","quarter","month","week","day","hour","minute","second","millisecond"];function fa(e){var t,r=!1,s,i=ht.length;for(t in e)if(u(e,t)&&!(L.call(ht,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(s=0;s<i;++s)if(e[ht[s]]){if(r)return!1;parseFloat(e[ht[s]])!==k(e[ht[s]])&&(r=!0)}return!0}function ma(){return this._isValid}function pa(){return ne(NaN)}function Pt(e){var t=or(e),r=t.year||0,s=t.quarter||0,i=t.month||0,d=t.week||t.isoWeek||0,h=t.day||0,v=t.hour||0,S=t.minute||0,O=t.second||0,G=t.millisecond||0;this._isValid=fa(t),this._milliseconds=+G+O*1e3+S*6e4+v*1e3*60*60,this._days=+h+d*7,this._months=+i+s*3+r*12,this._data={},this._locale=ye(),this._bubble()}function Yt(e){return e instanceof Pt}function _r(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function ga(e,t,r){var s=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),d=0,h;for(h=0;h<s;h++)(r&&e[h]!==t[h]||!r&&k(e[h])!==k(t[h]))&&d++;return d+i}function ws(e,t){_(e,0,0,function(){var r=this.utcOffset(),s="+";return r<0&&(r=-r,s="-"),s+de(~~(r/60),2)+t+de(~~r%60,2)})}ws("Z",":"),ws("ZZ",""),y("Z",kt),y("ZZ",kt),b(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=vr(kt,e)});var ya=/([\+\-]|\d\d)/gi;function vr(e,t){var r=(t||"").match(e),s,i,d;return r===null?null:(s=r[r.length-1]||[],i=(s+"").match(ya)||["-",0,0],d=+(i[1]*60)+k(i[2]),d===0?0:i[0]==="+"?d:-d)}function Fr(e,t){var r,s;return t._isUTC?(r=t.clone(),s=(q(e)||x(e)?e.valueOf():I(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+s),n.updateOffset(r,!1),r):I(e).local()}function xr(e){return-Math.round(e._d.getTimezoneOffset())}n.updateOffset=function(){};function wa(e,t,r){var s=this._offset||0,i;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=vr(kt,e),e===null)return this}else Math.abs(e)<16&&!r&&(e=e*60);return!this._isUTC&&t&&(i=xr(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),s!==e&&(!t||this._changeInProgress?xs(this,ne(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?s:xr(this)}function _a(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function va(e){return this.utcOffset(0,e)}function Fa(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(xr(this),"m")),this}function xa(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=vr(Vn,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Ta(e){return this.isValid()?(e=e?I(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Ca(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Sa(){if(!m(this._isDSTShifted))return this._isDSTShifted;var e={},t;return fe(e,this),e=ps(e),e._a?(t=e._isUTC?C(e._a):I(e._a),this._isDSTShifted=this.isValid()&&ga(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function ka(){return this.isValid()?!this._isUTC:!1}function Da(){return this.isValid()?this._isUTC:!1}function _s(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Ma=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,ba=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ne(e,t){var r=e,s=null,i,d,h;return Yt(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:g(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(s=Ma.exec(e))?(i=s[1]==="-"?-1:1,r={y:0,d:k(s[ce])*i,h:k(s[A])*i,m:k(s[se])*i,s:k(s[pe])*i,ms:k(_r(s[Pe]*1e3))*i}):(s=ba.exec(e))?(i=s[1]==="-"?-1:1,r={y:Ye(s[2],i),M:Ye(s[3],i),w:Ye(s[4],i),d:Ye(s[5],i),h:Ye(s[6],i),m:Ye(s[7],i),s:Ye(s[8],i)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(h=Oa(I(r.from),I(r.to)),r={},r.ms=h.milliseconds,r.M=h.months),d=new Pt(r),Yt(e)&&u(e,"_locale")&&(d._locale=e._locale),Yt(e)&&u(e,"_isValid")&&(d._isValid=e._isValid),d}ne.fn=Pt.prototype,ne.invalid=pa;function Ye(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function vs(e,t){var r={};return r.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function Oa(e,t){var r;return e.isValid()&&t.isValid()?(t=Fr(t,e),e.isBefore(t)?r=vs(e,t):(r=vs(t,e),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function Fs(e,t){return function(r,s){var i,d;return s!==null&&!isNaN(+s)&&(Gr(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),d=r,r=s,s=d),i=ne(r,s),xs(this,i,e),this}}function xs(e,t,r,s){var i=t._milliseconds,d=_r(t._days),h=_r(t._months);e.isValid()&&(s=s??!0,h&&ss(e,Ft(e,"Month")+h*r),d&&Zr(e,"Date",Ft(e,"Date")+d*r),i&&e._d.setTime(e._d.valueOf()+i*r),s&&n.updateOffset(e,d||h))}var Ea=Fs(1,"add"),Pa=Fs(-1,"subtract");function Ts(e){return typeof e=="string"||e instanceof String}function Ya(e){return q(e)||x(e)||Ts(e)||g(e)||Na(e)||Ia(e)||e===null||e===void 0}function Ia(e){var t=c(e)&&!f(e),r=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,d,h=s.length;for(i=0;i<h;i+=1)d=s[i],r=r||u(e,d);return t&&r}function Na(e){var t=l(e),r=!1;return t&&(r=e.filter(function(s){return!g(s)&&Ts(e)}).length===0),t&&r}function La(e){var t=c(e)&&!f(e),r=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,d;for(i=0;i<s.length;i+=1)d=s[i],r=r||u(e,d);return t&&r}function Wa(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function Ra(e,t){arguments.length===1&&(arguments[0]?Ya(arguments[0])?(e=arguments[0],t=void 0):La(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||I(),s=Fr(r,this).startOf("day"),i=n.calendarFormat(this,s)||"sameElse",d=t&&(le(t[i])?t[i].call(this,r):t[i]);return this.format(d||this.localeData().calendar(i,this,I(r)))}function Aa(){return new oe(this)}function Ua(e,t){var r=q(e)?e:I(e);return this.isValid()&&r.isValid()?(t=ee(t)||"millisecond",t==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf()):!1}function $a(e,t){var r=q(e)?e:I(e);return this.isValid()&&r.isValid()?(t=ee(t)||"millisecond",t==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf()):!1}function Ha(e,t,r,s){var i=q(e)?e:I(e),d=q(t)?t:I(t);return this.isValid()&&i.isValid()&&d.isValid()?(s=s||"()",(s[0]==="("?this.isAfter(i,r):!this.isBefore(i,r))&&(s[1]===")"?this.isBefore(d,r):!this.isAfter(d,r))):!1}function Va(e,t){var r=q(e)?e:I(e),s;return this.isValid()&&r.isValid()?(t=ee(t)||"millisecond",t==="millisecond"?this.valueOf()===r.valueOf():(s=r.valueOf(),this.clone().startOf(t).valueOf()<=s&&s<=this.clone().endOf(t).valueOf())):!1}function ja(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Ba(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Qa(e,t,r){var s,i,d;if(!this.isValid())return NaN;if(s=Fr(e,this),!s.isValid())return NaN;switch(i=(s.utcOffset()-this.utcOffset())*6e4,t=ee(t),t){case"year":d=It(this,s)/12;break;case"month":d=It(this,s);break;case"quarter":d=It(this,s)/3;break;case"second":d=(this-s)/1e3;break;case"minute":d=(this-s)/6e4;break;case"hour":d=(this-s)/36e5;break;case"day":d=(this-s-i)/864e5;break;case"week":d=(this-s-i)/6048e5;break;default:d=this-s}return r?d:te(d)}function It(e,t){if(e.date()<t.date())return-It(t,e);var r=(t.year()-e.year())*12+(t.month()-e.month()),s=e.clone().add(r,"months"),i,d;return t-s<0?(i=e.clone().add(r-1,"months"),d=(t-s)/(s-i)):(i=e.clone().add(r+1,"months"),d=(t-s)/(i-s)),-(r+d)||0}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Ga(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function za(e){if(!this.isValid())return null;var t=e!==!0,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?_t(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):le(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",_t(r,"Z")):_t(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Ka(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",r,s,i,d;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),r="["+e+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",d=t+'[")]',this.format(r+s+i+d)}function Za(e){e||(e=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var t=_t(this,e);return this.localeData().postformat(t)}function qa(e,t){return this.isValid()&&(q(e)&&e.isValid()||I(e).isValid())?ne({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Ja(e){return this.from(I(),e)}function Xa(e,t){return this.isValid()&&(q(e)&&e.isValid()||I(e).isValid())?ne({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function eo(e){return this.to(I(),e)}function Cs(e){var t;return e===void 0?this._locale._abbr:(t=ye(e),t!=null&&(this._locale=t),this)}var Ss=U("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function ks(){return this._locale}var Nt=1e3,Be=60*Nt,Lt=60*Be,Ds=(365*400+97)*24*Lt;function Qe(e,t){return(e%t+t)%t}function Ms(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-Ds:new Date(e,t,r).valueOf()}function bs(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-Ds:Date.UTC(e,t,r)}function to(e){var t,r;if(e=ee(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?bs:Ms,e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Qe(t+(this._isUTC?0:this.utcOffset()*Be),Lt);break;case"minute":t=this._d.valueOf(),t-=Qe(t,Be);break;case"second":t=this._d.valueOf(),t-=Qe(t,Nt);break}return this._d.setTime(t),n.updateOffset(this,!0),this}function ro(e){var t,r;if(e=ee(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?bs:Ms,e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Lt-Qe(t+(this._isUTC?0:this.utcOffset()*Be),Lt)-1;break;case"minute":t=this._d.valueOf(),t+=Be-Qe(t,Be)-1;break;case"second":t=this._d.valueOf(),t+=Nt-Qe(t,Nt)-1;break}return this._d.setTime(t),n.updateOffset(this,!0),this}function so(){return this._d.valueOf()-(this._offset||0)*6e4}function no(){return Math.floor(this.valueOf()/1e3)}function io(){return new Date(this.valueOf())}function ao(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function oo(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function lo(){return this.isValid()?this.toISOString():null}function co(){return Q(this)}function uo(){return F({},w(this))}function ho(){return w(this).overflow}function fo(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}_("N",0,0,"eraAbbr"),_("NN",0,0,"eraAbbr"),_("NNN",0,0,"eraAbbr"),_("NNNN",0,0,"eraName"),_("NNNNN",0,0,"eraNarrow"),_("y",["y",1],"yo","eraYear"),_("y",["yy",2],0,"eraYear"),_("y",["yyy",3],0,"eraYear"),_("y",["yyyy",4],0,"eraYear"),y("N",Tr),y("NN",Tr),y("NNN",Tr),y("NNNN",Co),y("NNNNN",So),b(["N","NN","NNN","NNNN","NNNNN"],function(e,t,r,s){var i=r._locale.erasParse(e,s,r._strict);i?w(r).era=i:w(r).invalidEra=e}),y("y",Ve),y("yy",Ve),y("yyy",Ve),y("yyyy",Ve),y("yo",ko),b(["y","yy","yyy","yyyy"],j),b(["yo"],function(e,t,r,s){var i;r._locale._eraYearOrdinalRegex&&(i=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?t[j]=r._locale.eraYearOrdinalParse(e,i):t[j]=parseInt(e,10)});function mo(e,t){var r,s,i,d=this._eras||ye("en")._eras;for(r=0,s=d.length;r<s;++r){switch(typeof d[r].since){case"string":i=n(d[r].since).startOf("day"),d[r].since=i.valueOf();break}switch(typeof d[r].until){case"undefined":d[r].until=1/0;break;case"string":i=n(d[r].until).startOf("day").valueOf(),d[r].until=i.valueOf();break}}return d}function po(e,t,r){var s,i,d=this.eras(),h,v,S;for(e=e.toUpperCase(),s=0,i=d.length;s<i;++s)if(h=d[s].name.toUpperCase(),v=d[s].abbr.toUpperCase(),S=d[s].narrow.toUpperCase(),r)switch(t){case"N":case"NN":case"NNN":if(v===e)return d[s];break;case"NNNN":if(h===e)return d[s];break;case"NNNNN":if(S===e)return d[s];break}else if([h,v,S].indexOf(e)>=0)return d[s]}function go(e,t){var r=e.since<=e.until?1:-1;return t===void 0?n(e.since).year():n(e.since).year()+(t-e.offset)*r}function yo(){var e,t,r,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),s[e].since<=r&&r<=s[e].until||s[e].until<=r&&r<=s[e].since)return s[e].name;return""}function wo(){var e,t,r,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),s[e].since<=r&&r<=s[e].until||s[e].until<=r&&r<=s[e].since)return s[e].narrow;return""}function _o(){var e,t,r,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),s[e].since<=r&&r<=s[e].until||s[e].until<=r&&r<=s[e].since)return s[e].abbr;return""}function vo(){var e,t,r,s,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(r=i[e].since<=i[e].until?1:-1,s=this.clone().startOf("day").valueOf(),i[e].since<=s&&s<=i[e].until||i[e].until<=s&&s<=i[e].since)return(this.year()-n(i[e].since).year())*r+i[e].offset;return this.year()}function Fo(e){return u(this,"_erasNameRegex")||Cr.call(this),e?this._erasNameRegex:this._erasRegex}function xo(e){return u(this,"_erasAbbrRegex")||Cr.call(this),e?this._erasAbbrRegex:this._erasRegex}function To(e){return u(this,"_erasNarrowRegex")||Cr.call(this),e?this._erasNarrowRegex:this._erasRegex}function Tr(e,t){return t.erasAbbrRegex(e)}function Co(e,t){return t.erasNameRegex(e)}function So(e,t){return t.erasNarrowRegex(e)}function ko(e,t){return t._eraYearOrdinalRegex||Ve}function Cr(){var e=[],t=[],r=[],s=[],i,d,h=this.eras();for(i=0,d=h.length;i<d;++i)t.push(X(h[i].name)),e.push(X(h[i].abbr)),r.push(X(h[i].narrow)),s.push(X(h[i].name)),s.push(X(h[i].abbr)),s.push(X(h[i].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}_(0,["gg",2],0,function(){return this.weekYear()%100}),_(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Wt(e,t){_(0,[e,e.length],0,t)}Wt("gggg","weekYear"),Wt("ggggg","weekYear"),Wt("GGGG","isoWeekYear"),Wt("GGGGG","isoWeekYear"),H("weekYear","gg"),H("isoWeekYear","GG"),V("weekYear",1),V("isoWeekYear",1),y("G",St),y("g",St),y("GG",Y,J),y("gg",Y,J),y("GGGG",dr,lr),y("gggg",dr,lr),y("GGGGG",Ct,xt),y("ggggg",Ct,xt),at(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,s){t[s.substr(0,2)]=k(e)}),at(["gg","GG"],function(e,t,r,s){t[s]=n.parseTwoDigitYear(e)});function Do(e){return Os.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Mo(e){return Os.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function bo(){return ge(this.year(),1,4)}function Oo(){return ge(this.isoWeekYear(),1,4)}function Eo(){var e=this.localeData()._week;return ge(this.year(),e.dow,e.doy)}function Po(){var e=this.localeData()._week;return ge(this.weekYear(),e.dow,e.doy)}function Os(e,t,r,s,i){var d;return e==null?dt(this,s,i).year:(d=ge(e,s,i),t>d&&(t=d),Yo.call(this,e,t,r,s,i))}function Yo(e,t,r,s,i){var d=os(e,t,r,s,i),h=lt(d.year,0,d.dayOfYear);return this.year(h.getUTCFullYear()),this.month(h.getUTCMonth()),this.date(h.getUTCDate()),this}_("Q",0,"Qo","quarter"),H("quarter","Q"),V("quarter",7),y("Q",qr),b("Q",function(e,t){t[me]=(k(e)-1)*3});function Io(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}_("D",["DD",2],"Do","date"),H("date","D"),V("date",9),y("D",Y),y("DD",Y,J),y("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),b(["D","DD"],ce),b("Do",function(e,t){t[ce]=k(e.match(Y)[0])});var Es=He("Date",!0);_("DDD",["DDDD",3],"DDDo","dayOfYear"),H("dayOfYear","DDD"),V("dayOfYear",4),y("DDD",Tt),y("DDDD",Jr),b(["DDD","DDDD"],function(e,t,r){r._dayOfYear=k(e)});function No(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}_("m",["mm",2],0,"minute"),H("minute","m"),V("minute",14),y("m",Y),y("mm",Y,J),b(["m","mm"],se);var Lo=He("Minutes",!1);_("s",["ss",2],0,"second"),H("second","s"),V("second",15),y("s",Y),y("ss",Y,J),b(["s","ss"],pe);var Wo=He("Seconds",!1);_("S",0,0,function(){return~~(this.millisecond()/100)}),_(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),_(0,["SSS",3],0,"millisecond"),_(0,["SSSS",4],0,function(){return this.millisecond()*10}),_(0,["SSSSS",5],0,function(){return this.millisecond()*100}),_(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),_(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),_(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),_(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),H("millisecond","ms"),V("millisecond",16),y("S",Tt,qr),y("SS",Tt,J),y("SSS",Tt,Jr);var De,Ps;for(De="SSSS";De.length<=9;De+="S")y(De,Ve);function Ro(e,t){t[Pe]=k(("0."+e)*1e3)}for(De="S";De.length<=9;De+="S")b(De,Ro);Ps=He("Milliseconds",!1),_("z",0,0,"zoneAbbr"),_("zz",0,0,"zoneName");function Ao(){return this._isUTC?"UTC":""}function Uo(){return this._isUTC?"Coordinated Universal Time":""}var p=oe.prototype;p.add=Ea,p.calendar=Ra,p.clone=Aa,p.diff=Qa,p.endOf=ro,p.format=Za,p.from=qa,p.fromNow=Ja,p.to=Xa,p.toNow=eo,p.get=$n,p.invalidAt=ho,p.isAfter=Ua,p.isBefore=$a,p.isBetween=Ha,p.isSame=Va,p.isSameOrAfter=ja,p.isSameOrBefore=Ba,p.isValid=co,p.lang=Ss,p.locale=Cs,p.localeData=ks,p.max=da,p.min=la,p.parsingFlags=uo,p.set=Hn,p.startOf=to,p.subtract=Pa,p.toArray=ao,p.toObject=oo,p.toDate=io,p.toISOString=za,p.inspect=Ka,typeof Symbol<"u"&&Symbol.for!=null&&(p[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),p.toJSON=lo,p.toString=Ga,p.unix=no,p.valueOf=so,p.creationData=fo,p.eraName=yo,p.eraNarrow=wo,p.eraAbbr=_o,p.eraYear=vo,p.year=as,p.isLeapYear=oi,p.weekYear=Do,p.isoWeekYear=Mo,p.quarter=p.quarters=Io,p.month=ns,p.daysInMonth=ni,p.week=p.weeks=fi,p.isoWeek=p.isoWeeks=mi,p.weeksInYear=Eo,p.weeksInWeekYear=Po,p.isoWeeksInYear=bo,p.isoWeeksInISOWeekYear=Oo,p.date=Es,p.day=p.days=Di,p.weekday=Mi,p.isoWeekday=bi,p.dayOfYear=No,p.hour=p.hours=Li,p.minute=p.minutes=Lo,p.second=p.seconds=Wo,p.millisecond=p.milliseconds=Ps,p.utcOffset=wa,p.utc=va,p.local=Fa,p.parseZone=xa,p.hasAlignedHourOffset=Ta,p.isDST=Ca,p.isLocal=ka,p.isUtcOffset=Da,p.isUtc=_s,p.isUTC=_s,p.zoneAbbr=Ao,p.zoneName=Uo,p.dates=U("dates accessor is deprecated. Use date instead.",Es),p.months=U("months accessor is deprecated. Use month instead",ns),p.years=U("years accessor is deprecated. Use year instead",as),p.zone=U("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",_a),p.isDSTShifted=U("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Sa);function $o(e){return I(e*1e3)}function Ho(){return I.apply(null,arguments).parseZone()}function Ys(e){return e}var M=sr.prototype;M.calendar=Dn,M.longDateFormat=En,M.invalidDate=Yn,M.ordinal=Ln,M.preparse=Ys,M.postformat=Ys,M.relativeTime=Rn,M.pastFuture=An,M.set=Sn,M.eras=mo,M.erasParse=po,M.erasConvertYear=go,M.erasAbbrRegex=xo,M.erasNameRegex=Fo,M.erasNarrowRegex=To,M.months=ei,M.monthsShort=ti,M.monthsParse=si,M.monthsRegex=ai,M.monthsShortRegex=ii,M.week=di,M.firstDayOfYear=hi,M.firstDayOfWeek=ui,M.weekdays=xi,M.weekdaysMin=Ci,M.weekdaysShort=Ti,M.weekdaysParse=ki,M.weekdaysRegex=Oi,M.weekdaysShortRegex=Ei,M.weekdaysMinRegex=Pi,M.isPM=Ii,M.meridiem=Wi;function Rt(e,t,r,s){var i=ye(),d=C().set(s,t);return i[r](d,e)}function Is(e,t,r){if(g(e)&&(t=e,e=void 0),e=e||"",t!=null)return Rt(e,t,r,"month");var s,i=[];for(s=0;s<12;s++)i[s]=Rt(e,s,r,"month");return i}function Sr(e,t,r,s){typeof e=="boolean"?(g(t)&&(r=t,t=void 0),t=t||""):(t=e,r=t,e=!1,g(t)&&(r=t,t=void 0),t=t||"");var i=ye(),d=e?i._week.dow:0,h,v=[];if(r!=null)return Rt(t,(r+d)%7,s,"day");for(h=0;h<7;h++)v[h]=Rt(t,(h+d)%7,s,"day");return v}function Vo(e,t){return Is(e,t,"months")}function jo(e,t){return Is(e,t,"monthsShort")}function Bo(e,t,r){return Sr(e,t,r,"weekdays")}function Qo(e,t,r){return Sr(e,t,r,"weekdaysShort")}function Go(e,t,r){return Sr(e,t,r,"weekdaysMin")}ke("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=k(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+r}}),n.lang=U("moment.lang is deprecated. Use moment.locale instead.",ke),n.langData=U("moment.langData is deprecated. Use moment.localeData instead.",ye);var we=Math.abs;function zo(){var e=this._data;return this._milliseconds=we(this._milliseconds),this._days=we(this._days),this._months=we(this._months),e.milliseconds=we(e.milliseconds),e.seconds=we(e.seconds),e.minutes=we(e.minutes),e.hours=we(e.hours),e.months=we(e.months),e.years=we(e.years),this}function Ns(e,t,r,s){var i=ne(t,r);return e._milliseconds+=s*i._milliseconds,e._days+=s*i._days,e._months+=s*i._months,e._bubble()}function Ko(e,t){return Ns(this,e,t,1)}function Zo(e,t){return Ns(this,e,t,-1)}function Ls(e){return e<0?Math.floor(e):Math.ceil(e)}function qo(){var e=this._milliseconds,t=this._days,r=this._months,s=this._data,i,d,h,v,S;return e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0||(e+=Ls(kr(r)+t)*864e5,t=0,r=0),s.milliseconds=e%1e3,i=te(e/1e3),s.seconds=i%60,d=te(i/60),s.minutes=d%60,h=te(d/60),s.hours=h%24,t+=te(h/24),S=te(Ws(t)),r+=S,t-=Ls(kr(S)),v=te(r/12),r%=12,s.days=t,s.months=r,s.years=v,this}function Ws(e){return e*4800/146097}function kr(e){return e*146097/4800}function Jo(e){if(!this.isValid())return NaN;var t,r,s=this._milliseconds;if(e=ee(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+s/864e5,r=this._months+Ws(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(kr(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return t*24+s/36e5;case"minute":return t*1440+s/6e4;case"second":return t*86400+s/1e3;case"millisecond":return Math.floor(t*864e5)+s;default:throw new Error("Unknown unit "+e)}}function Xo(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+k(this._months/12)*31536e6:NaN}function _e(e){return function(){return this.as(e)}}var el=_e("ms"),tl=_e("s"),rl=_e("m"),sl=_e("h"),nl=_e("d"),il=_e("w"),al=_e("M"),ol=_e("Q"),ll=_e("y");function dl(){return ne(this)}function cl(e){return e=ee(e),this.isValid()?this[e+"s"]():NaN}function Ie(e){return function(){return this.isValid()?this._data[e]:NaN}}var ul=Ie("milliseconds"),hl=Ie("seconds"),fl=Ie("minutes"),ml=Ie("hours"),pl=Ie("days"),gl=Ie("months"),yl=Ie("years");function wl(){return te(this.days()/7)}var ve=Math.round,Ge={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function _l(e,t,r,s,i){return i.relativeTime(t||1,!!r,e,s)}function vl(e,t,r,s){var i=ne(e).abs(),d=ve(i.as("s")),h=ve(i.as("m")),v=ve(i.as("h")),S=ve(i.as("d")),O=ve(i.as("M")),G=ve(i.as("w")),Fe=ve(i.as("y")),Me=d<=r.ss&&["s",d]||d<r.s&&["ss",d]||h<=1&&["m"]||h<r.m&&["mm",h]||v<=1&&["h"]||v<r.h&&["hh",v]||S<=1&&["d"]||S<r.d&&["dd",S];return r.w!=null&&(Me=Me||G<=1&&["w"]||G<r.w&&["ww",G]),Me=Me||O<=1&&["M"]||O<r.M&&["MM",O]||Fe<=1&&["y"]||["yy",Fe],Me[2]=t,Me[3]=+e>0,Me[4]=s,_l.apply(null,Me)}function Fl(e){return e===void 0?ve:typeof e=="function"?(ve=e,!0):!1}function xl(e,t){return Ge[e]===void 0?!1:t===void 0?Ge[e]:(Ge[e]=t,e==="s"&&(Ge.ss=t-1),!0)}function Tl(e,t){if(!this.isValid())return this.localeData().invalidDate();var r=!1,s=Ge,i,d;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(r=e),typeof t=="object"&&(s=Object.assign({},Ge,t),t.s!=null&&t.ss==null&&(s.ss=t.s-1)),i=this.localeData(),d=vl(this,!r,s,i),r&&(d=i.pastFuture(+this,d)),i.postformat(d)}var Dr=Math.abs;function ze(e){return(e>0)-(e<0)||+e}function At(){if(!this.isValid())return this.localeData().invalidDate();var e=Dr(this._milliseconds)/1e3,t=Dr(this._days),r=Dr(this._months),s,i,d,h,v=this.asSeconds(),S,O,G,Fe;return v?(s=te(e/60),i=te(s/60),e%=60,s%=60,d=te(r/12),r%=12,h=e?e.toFixed(3).replace(/\.?0+$/,""):"",S=v<0?"-":"",O=ze(this._months)!==ze(v)?"-":"",G=ze(this._days)!==ze(v)?"-":"",Fe=ze(this._milliseconds)!==ze(v)?"-":"",S+"P"+(d?O+d+"Y":"")+(r?O+r+"M":"")+(t?G+t+"D":"")+(i||s||e?"T":"")+(i?Fe+i+"H":"")+(s?Fe+s+"M":"")+(e?Fe+h+"S":"")):"P0D"}var D=Pt.prototype;D.isValid=ma,D.abs=zo,D.add=Ko,D.subtract=Zo,D.as=Jo,D.asMilliseconds=el,D.asSeconds=tl,D.asMinutes=rl,D.asHours=sl,D.asDays=nl,D.asWeeks=il,D.asMonths=al,D.asQuarters=ol,D.asYears=ll,D.valueOf=Xo,D._bubble=qo,D.clone=dl,D.get=cl,D.milliseconds=ul,D.seconds=hl,D.minutes=fl,D.hours=ml,D.days=pl,D.weeks=wl,D.months=gl,D.years=yl,D.humanize=Tl,D.toISOString=At,D.toString=At,D.toJSON=At,D.locale=Cs,D.localeData=ks,D.toIsoString=U("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",At),D.lang=Ss,_("X",0,0,"unix"),_("x",0,0,"valueOf"),y("x",St),y("X",jn),b("X",function(e,t,r){r._d=new Date(parseFloat(e)*1e3)}),b("x",function(e,t,r){r._d=new Date(k(e))});return n.version="2.29.4",a(I),n.fn=p,n.min=ca,n.max=ua,n.now=ha,n.utc=C,n.unix=$o,n.months=Vo,n.isDate=x,n.locale=ke,n.invalid=$,n.duration=ne,n.isMoment=q,n.weekdays=Bo,n.parseZone=Ho,n.localeData=ye,n.isDuration=Yt,n.monthsShort=jo,n.weekdaysMin=Go,n.defineLocale=mr,n.updateLocale=$i,n.locales=Hi,n.weekdaysShort=Qo,n.normalizeUnits=ee,n.relativeTimeRounding=Fl,n.relativeTimeThreshold=xl,n.calendarFormat=Wa,n.prototype=p,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n})});var Rl={};Ol(Rl,{default:()=>tr});module.exports=El(Rl);var Cn=require("obsidian");var xe=require("obsidian");var ue=require("obsidian"),$t={state:{source:!1,mode:"source"}},be=/\[\[(.+?)([|#].*?)?\]\] ?/;async function Mr(o,n){await o.workspace.getLeaf().openFile(n,$t),o.commands.executeCommandById("file-explorer:reveal-active-file")}function E(o,n){let{app:a,settings:l}=o,c=n===void 0?a.workspace.getActiveFile():typeof n=="string"?a.vault.getFileByPath(n):n;return!c||!(c instanceof ue.TFile)||c.extension!=="md"?!1:c.name==="Template.md"?"Template":c.path.startsWith(l.coding.folder+"/")?"Code File":c.path.startsWith(l.extraction.folder+"/")?"Extraction File":"Data File"}async function Ht(o,n,a){let{app:l,settings:c}=o,u=["```"+n,"```",""];l.vault.getFolderByPath(c.analysis.folder)||l.vault.createFolder(c.analysis.folder);let m=(0,ue.normalizePath)(c.analysis.folder+`/${a}.md`),g=l.vault.getFileByPath(m)||await l.vault.create(m,u.join(`
`));await Mr(l,g),z(o.app)?.setCursor({line:u.length,ch:0})}function z(o){let n=o.workspace.activeEditor?.editor;return n||new ue.Notice("No active editor."),n}function Oe(o){if(o.getLine(o.getCursor().line).trim()===""&&!o.somethingSelected())return new ue.Notice(`Current line is empty. 

Move cursor to a paragraph and try again.`,4e3),!0;let a=o.getCursor("head").line!==o.getCursor("anchor").line,l=o.listSelections().length>1;return a||l?(new ue.Notice(`Paragraph ambiguous since multiple lines are selected.

Unselect, move your cursor to the paragraph you want to affect, and use the command again.`,5e3),!0):!1}function Ke(o){let n=o.getSelection().includes("==");return n&&new ue.Notice(`Selection contains highlights.
Overlapping highlights are not supported.`,4e3),n}function Vt(o){let n=o.workspace.getActiveFile();if(!n)return!1;let a=/[|^#]/,l=n.basename.match(a)?.[0];if(!l)return!1;let c=`The current file contains an invalid character: ${l}

Rename the file and try again.`;return new ue.Notice(c,0),!0}function Ze(o){o.metadataTypeManager.setType("extraction-date","datetime"),o.metadataTypeManager.setType("extraction-source","multitext"),o.metadataTypeManager.setType("code description","text")}var jt={"last used first":(o,n)=>n.stat.mtime-o.stat.mtime,"oldest used first":(o,n)=>o.stat.mtime-n.stat.mtime,"frequently used first":(o,n)=>n.stat.size-o.stat.size,"rarely used first":(o,n)=>o.stat.size-n.stat.size,random:()=>Math.random()-.5,alphabetical:(o,n)=>o.basename.localeCompare(n.basename)},Us={",":"Comma (,)",";":"Semicolon (;)","	":"Tab"},$s={"right-split":"to the right","down-split":"to the bottom",tab:"in new tab"},he={coding:{folder:"Codes",displayCount:!0,sortFunc:"last used first"},extraction:{folder:"Extractions",displayCount:!0,openingMode:"tab",csvSeparator:",",ignorePropertyOnMerge:["extraction-source","extraction-date"]},analysis:{folder:"Analysis"},suppressSuggestionInFields:[],propertiesKeysWidthPercent:35};function br(o,n){return n.path.slice(o.settings.coding.folder.length+1,-3)}function Hs(o,n){return n?n.path===o.settings.coding.folder+"/Template.md":!1}function ft(o,n){let a=o.app.metadataCache.resolvedLinks[n.path]||{},l=0;for(let[c,u]of Object.entries(a))E(o,c)==="Data File"&&(l+=u);return l}function Bt(o,n,a){let l=o.app;return(a.match(new RegExp(be,"g"))||[]).reduce((f,m)=>{let[g,x]=m.match(be)||[];if(!x)return f;let T=l.metadataCache.getFirstLinkpathDest(x,n.path);return T&&E(o,T)==="Code File"&&f.push({tFile:T,wikilink:m}),f},[])}function Qt(o){let n=o.app.vault.getMarkdownFiles().filter(l=>E(o,l)==="Code File"),a=jt[o.settings.coding.sortFunc];return n.sort(a),n}function qe(o,n){let a=br(o,n);if(!o.settings.coding.displayCount)return a;let c=ft(o,n);return`${a} (${c}x)`}async function Vs(o){let n=o.codeblockLabels.codeOverview;await Ht(o,n,"Code Overview")}function js(o,n){let{app:a,settings:l}=o,c=[...n.children];c.sort((f,m)=>f instanceof xe.TFolder&&m instanceof xe.TFile?-1:f instanceof xe.TFile&&m instanceof xe.TFolder?1:f.name.localeCompare(m.name));let u="";for(let f of c)if(f instanceof xe.TFolder){let m=f;if(!m.children.some(T=>T instanceof xe.TFile&&T.extension==="md"))continue;let x=js(o,m);u+=`<li>\u{1F4C1} ${m.name} ${x}</li>`}else if(f instanceof xe.TFile){let m=f,g=m.path===l.coding.folder+"/Template.md",x=m.extension!=="md";if(g||x)continue;let T=a.metadataCache.getFileCache(m)?.frontmatter?.["code description"],F=T?": "+T:"",C=`<a href="${m.path}" class="internal-link">${m.basename}</a>`,P=ft(o,m);u+=`<li>\u{1F4C4} ${C} (${P}x)${F}</li>`}return`<ul>${u}</ul>`}function Bs(o){let{app:n,settings:a}=o,l=n.vault.getFolderByPath(a.coding.folder);return l?js(o,l):`\u26A0\uFE0F Code folder "${a.coding.folder}" not found.`}var Js=require("obsidian");var Qs=As(Er()),Pr=/\^[\w-]+$/,Gs=/^!\[\[(.+?)#(\^[\w-]+)\]\]$/;function Pl(o){let[n]=o.match(Pr)||[];if(n){let l=o.slice(0,-n.length).trim();return{blockId:n,lineWithoutId:l}}return{blockId:"^id-"+(0,Qs.default)().format("YYMMDD-HHmmss"),lineWithoutId:o.trim()}}function Xe(o){let n=o.getCursor(),a=o.getLine(n.line),l=o.getSelection();if(l){let f=l.replace(/^( ?)(.+?)( ?)$/g,"$1==$2==$3");o.replaceSelection(f),a=o.getLine(n.line)}let{blockId:c,lineWithoutId:u}=Pl(a);return{blockId:c,lineWithoutId:u}}function et(o,n,a,l,c){let u=o.editorComponent.view.file,f=o.editorComponent.app;f.vault.setConfig("useMarkdownLinks",!1);let m=f.fileManager.generateMarkdownLink(n,u.path,"",a),g=`${l} ${m} ${c}`,x=o.getCursor();o.setLine(x.line,g),o.setCursor(x)}var Gt=require("obsidian"),Z=class extends Gt.FuzzySuggestModal{hotkeyInstructions=[{command:"\u2191 \u2193",purpose:"Navigate"},{command:"\u21B9 ",purpose:"Down"},{command:"shift \u21B9 ",purpose:"Up"},{command:"\u23CE",purpose:"Select"},{command:"esc",purpose:"Dismiss"}];plugin;settings;constructor(n){super(n.app),this.plugin=n,this.settings=n.settings,this.modalEl.addClass(n.cssclass),this.setInstructions(this.hotkeyInstructions),this.scope.register([],"Tab",a=>{a.isComposing||!this.chooser||this.chooser.moveDown(1)}),this.scope.register(["Shift"],"Tab",a=>{a.isComposing||!this.chooser||this.chooser.moveUp(1)})}},Ne=class extends Gt.Modal{plugin;confirmationButton;constructor(n){super(n.app),this.plugin=n,this.modalEl.addClass(n.cssclass)}onClose(){this.contentEl.empty()}};var K=require("obsidian");var Kt=require("obsidian"),Le=class extends Kt.AbstractInputSuggest{textInputEl;plugin;foldersInVault;constructor(n,a){super(n.app,a),this.textInputEl=a,this.plugin=n,this.foldersInVault=n.app.vault.getAllLoadedFiles().filter(l=>l instanceof Kt.TFolder)}getSuggestions(n){return this.foldersInVault.filter(a=>a.path.includes(n))}renderSuggestion(n,a){a.createEl("span",{text:n.path})}selectSuggestion(n){this.textInputEl.value=n.path,this.textInputEl.trigger("input"),this.close()}};function zs(o,n){return n.path.slice(o.settings.coding.folder.length+1)+"/"}var zt=class extends Le{getSuggestions(n){if(!n.includes("/"))return[];let a=this.plugin.settings;return this.foldersInVault.filter(c=>{let u=c.path.includes(n),f=c.path.startsWith(a.coding.folder+"/");return u&&f})}renderSuggestion(n,a){let l=zs(this.plugin,n);a.createEl("span",{text:l})}selectSuggestion(n){this.textInputEl.value=zs(this.plugin,n),this.textInputEl.trigger("input"),this.close()}};var Yr=class extends Ne{fullCode="";codeDesc="";onSubmit;constructor(n,a){super(n),this.onSubmit=a}onOpen(){let{contentEl:n}=this;n.addClass(this.plugin.cssclass);let a=c=>c!==""&&!c.startsWith("/")&&!c.endsWith("/"),l=()=>{this.close(),this.onSubmit(this.fullCode,this.codeDesc)};n.createEl("h4",{text:"New code creation"}),n.createEl("small",{text:'If there is a file "Template.md" at the root of the Codes Folder, the new Code File will be populated with its frontmatter.'}),n.createEl("br",{}),n.createEl("br",{}),new K.Setting(n).setName("Name of the code").setDesc('Use a slash ("/") in the name to create the Code File in a subfolder (group). Example: "groupname/codename".').addText(c=>{new zt(this.plugin,c.inputEl),c.onChange(u=>{this.fullCode=u.trim(),this.confirmationButton?.setDisabled(!a(this.fullCode))}).inputEl.setCssProps({width:"100%","min-width":"20rem"}),c.inputEl.addEventListener("keydown",u=>{u.key==="Enter"&&a(this.fullCode)&&(u.preventDefault(),l())})}),new K.Setting(n).setName("Code description").setDesc('Will be added as metadata with the key "code description".').addText(c=>{c.onChange(u=>{this.codeDesc=u.trim()}).inputEl.setCssProps({width:"100%","min-width":"20rem"}),c.inputEl.addEventListener("keydown",u=>{u.key==="Enter"&&a(this.fullCode)&&(u.preventDefault(),l())})}),new K.Setting(n).addButton(c=>{this.confirmationButton=c.setButtonText("Create").setCta().setDisabled(!0).onClick(l)}).addButton(c=>c.setButtonText("Cancel").onClick(()=>this.close()))}},Ir=class extends Ne{input="";onSubmit;constructor(n,a){super(n),this.onSubmit=a}onOpen(){let{contentEl:n}=this;n.addClass(this.plugin.cssclass),n.createEl("h4",{text:"Bulk-create new codes"}),n.createEl("p",{text:"Every line will result in a new code file."}),n.createEl("p",{text:'Use a slash ("/") in the name to create the Code File in a subfolder (group).'}),n.createEl("p",{text:'If there is a file "Template.md" at the root of the Codes Folder, the new Code Files will be populated with its frontmatter.'}),new K.Setting(n).addTextArea(a=>{a.onChange(l=>{this.input=l.trim(),this.confirmationButton?.setDisabled(this.input==="")}).inputEl.setCssProps({width:"100%","min-height":"10rem"})}).infoEl.remove(),new K.Setting(n).addButton(a=>{this.confirmationButton=a.setButtonText("Create").setCta().setDisabled(!0).onClick(()=>{this.close(),this.onSubmit(this.input)})}).addButton(a=>a.setButtonText("Cancel").onClick(()=>this.close()))}};async function Ks(o,n,a){let{app:l,settings:c}=o;n=n.replace(/\.md$/,"").replace(/[:#^?!"*<>|[\]\\]/g,"-").replace(/^\.|\/\./g,"").replace(/^\/+|\/+$/g,"");let u=(0,K.normalizePath)(`${c.coding.folder}/${n}.md`);if(l.vault.getFileByPath(u))return new K.Notice(`Code "${n}" already exists, Code File not created.`,0),!1;let m=n.split("/"),g=m.pop(),x=m.length>0?"/"+m.join("/"):"",T=c.coding.folder+x;l.vault.getFolderByPath(T)||await l.vault.createFolder(T);let C=`code description: "${a.replaceAll('"',"'")}"`,P=l.vault.getFileByPath(c.coding.folder+"/Template.md"),w=[];if(P){let $=await l.vault.read(P),{exists:re,frontmatter:R}=(0,K.getFrontMatterInfo)($);re&&(R=R.match(/^code description:/m)?R.replace(/^code description:.*$/m,C):C+`
`+R,w.push(...R.trim().split(`
`)))}else w.push(C);let W=["---",...w,"---","",""],Q=await l.vault.create(`${T}/${g}.md`,W.join(`
`));return Q?(new K.Notice(`Created new code file: "${n}"`,3500),Q):(new K.Notice("Failed to create new code file.",0),!1)}function Zs(o,n){new Yr(o,async(a,l)=>{let c=await Ks(o,a,l);c&&n(c)}).open()}function qs(o){new Ir(o,async n=>{let a=0,l=[];for(let u of n.split(`
`))await Ks(o,u,"")?a++:l.push(u);let c=`${a} file(s) created`;l.length>0&&(c+=`
Could not create: `+l.join(", ")),new K.Notice(c,l.length>0?0:3e3)}).open()}var Nr=class extends Z{editor;codesInPara;dataFile;constructor(n,a,l,c){super(n),this.editor=a,this.codesInPara=l,this.dataFile=c,this.setPlaceholder("Select code to assign"),this.setInstructions([...this.hotkeyInstructions,{command:"shift \u23CE",purpose:"Create new code"}]),this.scope.register(["Shift"],"Enter",u=>{u.isComposing||(u.preventDefault(),this.close(),this.onChooseItem("new-code-file"))})}getItems(){return[...Qt(this.plugin).filter(l=>!this.codesInPara.find(c=>c.path===l.path)),"new-code-file"]}getItemText(n){return n==="new-code-file"?"\u{1F79C} Create new code":qe(this.plugin,n)}onChooseItem(n){n==="new-code-file"?Zs(this.plugin,a=>this.assignCode(a,this.dataFile)):this.assignCode(n,this.dataFile)}async assignCode(n,a){let l=this.editor,c=br(this.plugin,n),{blockId:u,lineWithoutId:f}=Xe(l);et(l,n,c,f,u);let m=`![[${a.path.slice(0,-3)}#${u}]]
`;await this.app.vault.append(n,m)}};function Xs(o){let{app:n}=o,a=z(n);if(!a||Oe(a))return;if(E(o)!=="Data File"){new Js.Notice("You must be in a Data File to assign a code.",4e3);return}if(Ke(a)||Vt(n))return;let l=a.editorComponent.view.file,c=a.getLine(a.getCursor().line),u=Bt(o,l,c).map(f=>f.tFile);new Nr(o,a,u,l).open()}var en=require("obsidian");async function tn(o){let n=o.app,a=z(n);if(!a)return;if(E(o)!=="Code File"){new en.Notice("Must be in Code File to delete the code everywhere.",4e3);return}let l=a.editorComponent.view.file;await n.vault.trash(l,!0)}var We=require("obsidian");function rn(o,n){let a=Object.keys(n).map(l=>Yl(o,l,n[l]));return a.length===1?a[0]:function(){a.forEach(l=>l())}}function Yl(o,n,a){let l=o[n],c=o.hasOwnProperty(n),u=c?l:function(){return Object.getPrototypeOf(o)[n].apply(this,arguments)},f=a(u);return l&&Object.setPrototypeOf(f,l),Object.setPrototypeOf(m,f),o[n]=m,g;function m(...x){return f===u&&o[n]===m&&g(),f.apply(this,x)}function g(){o[n]===m&&(c?o[n]=u:delete o[n]),f!==u&&(f=u,Object.setPrototypeOf(m,l||Function))}}var nn=require("obsidian");var tt=require("obsidian");async function sn(o,n){let a=o.app,l=[],c=0,u=E(o,n),f=a.metadataCache.getFileCache(n)?.embeds||[];for(let g of f){let[x,T]=g.link.split("#");if(!x||!T)continue;let F=a.metadataCache.getFirstLinkpathDest(x,n.path);if(!F||E(o,F)!=="Data File")continue;let P=await Lr(a,n,F,T);P?l.push(P):c++}if(c===0&&l.length===0){let g=`\u26A0\uFE0F ${u} "${n.name}" has no references which could be deleted.`;new tt.Notice(g,0);return}let m=`${u} "${n.name}" and ${c} references to it deleted.
`;if(l.length>0){let g=[m,`\u26A0\uFE0F ${l.length} references could not be deleted:`,"- "+l.join(`
- `)].join(`
`);new tt.Notice(g,0)}else new tt.Notice(m)}async function Lr(o,n,a,l){let c=(await o.vault.read(a)).split(`
`),u=c.findIndex(x=>x.endsWith(l));if(u<0)return`Data File "${a.basename}", has no line with the ID "${l}".`;let f=c[u]||"",g=(f.match(new RegExp(be,"g"))||[]).find(x=>{x=x.trim().slice(2,-2);let T=o.metadataCache.getFirstLinkpathDest(x,a.path);return T instanceof tt.TFile&&T.path===n.path});return g?(c[u]=f.replace(g,""),await o.vault.modify(a,c.join(`
`)),""):`Data File "${a.basename}", line "${l}" has no valid link to the "${n.name}".`}function rt(o){let n=o.app.vault;return rn(n,{trash:l=>async(c,u)=>{let f=E(o,c);if((f==="Code File"||f==="Extraction File")&&c instanceof nn.TFile){let g=`Intercepted deletion of "${c.name}", deleting all references to the ${f} before proceeding with deletion.`;console.info(g),await sn(o,c)}await l.apply(n,[c,u])}})}var Wr=class extends Z{toBeMergedFile;permaNotice;constructor(n,a){super(n),this.setPlaceholder(`Select Code File to merge "${a.basename}" into`),this.toBeMergedFile=a;let l=["MERGING INFO","- Lists properties are fully merged.",`- For conflicting, non-list properties, the values from "${a.basename}" are take priority.`].join(`
`);this.permaNotice=new We.Notice(l,0)}onClose(){this.permaNotice.hide()}onNoSuggestion(){new We.Notice("There must be at least two Code Files to merge.",4e3),this.close()}getItems(){return Qt(this.plugin).filter(a=>a.path!==this.toBeMergedFile.path)}getItemText(n){return qe(this.plugin,n)}async onChooseItem(n){let{plugin:a,app:l}=this,c=`## Codes from "${this.toBeMergedFile.basename}"`,u=await l.vault.cachedRead(this.toBeMergedFile),{contentStart:f}=(0,We.getFrontMatterInfo)(u),m=u.slice(f).trim(),g=[c,m].join(`
`);a.trashWatcherUninstaller&&a.trashWatcherUninstaller(),await l.fileManager.mergeFile(n,this.toBeMergedFile,g,!1),a.trashWatcherUninstaller=rt(a),setTimeout(async()=>await l.vault.append(n,""),500),new We.Notice(`"${this.toBeMergedFile.basename}" merged into "${n.basename}".`,4e3)}};function an(o){let n=z(o.app);if(!n)return;if(E(o)!=="Code File"){new We.Notice("You must be in the Code File for this.",3500);return}let a=n.editorComponent.view.file;new Wr(o,a).open()}var Rr=require("obsidian");function on(o){E(o)!=="Code File"?new Rr.Notice("You must be in a code file.",4e3):Hs(o,o.app.workspace.getActiveFile())?new Rr.Notice("You cannot rename the template file.",5e3):o.app.commands.executeCommandById("workspace:edit-file-title")}var Te=require("obsidian");var Ar=class extends Z{codesInParagraph;dataFile;editor;constructor(n,a,l,c){super(n),this.codesInParagraph=c,this.dataFile=l,this.editor=a,this.plugin=n,this.setPlaceholder("Select code to remove from paragraph")}getItems(){return this.codesInParagraph}getItemText(n){return qe(this.plugin,n.tFile)}onChooseItem(n){ln(this.editor,this.dataFile,n)}};async function ln(o,n,a){let l=o.editorComponent.app,c=o.getCursor().line,u=o.getLine(c),f=u.replace(a.wikilink,"");o.setLine(c,f);let[m]=u.match(Pr)||[];if(!m){new Te.Notice(`No ID found in current line.
Reference in Code File thus not deleted.`,0);return}let g=(await l.vault.read(a.tFile)).split(`
`),x=g.findIndex(T=>{if(!T.includes(m))return!1;let F=T.match(new RegExp(be,"g"))||[];for(let C of F){let[P,w]=C.match(be)||[];if(!w)continue;if(l.metadataCache.getFirstLinkpathDest(w,a.tFile.path)?.path===n.path)return!0}return!1});if(x<0){new Te.Notice(`"Code File "${a.tFile.basename}" contains no reference to Data File "${n.basename}" with the ID "${m}". Reference in Code File is thus not deleted.`,0);return}g.splice(x,1),await l.vault.modify(a.tFile,g.join(`
`)),new Te.Notice(`Assignment of code "${a.tFile.basename}" removed.`,3500)}async function Il(o,n){let a=n.getLine(n.getCursor().line),[l,c,u]=a.match(Gs)||[],f=n.editorComponent.view.file,m=o.metadataCache.getFirstLinkpathDest(c||"",f.path);if(!u||!c||!m){new Te.Notice("Current line has no correct reference.",0);return}let g=await Lr(o,f,m,u);if(g){new Te.Notice(g+`

Aborting removal of Code.`,0);return}o.commands.executeCommandById("editor:delete-paragraph"),n.setCursor({line:n.getCursor().line,ch:0}),new Te.Notice(`Assignment of code "${f.basename}" removed.`,3500)}function dn(o){let n=o.app,a=z(n);if(!a||Oe(a))return;if(E(o)==="Code File"&&Il(n,a),E(o)!=="Data File"){new Te.Notice("You must be in a Data File or Code File to unassign a code.",4e3);return}let l=a.editorComponent.view.file,c=a.getLine(a.getCursor().line),u=Bt(o,l,c);u.length===0?new Te.Notice("Line does not contain any codes to remove.",3500):u.length===1?ln(a,l,u[0]):new Ar(o,a,l,u).open()}var cn=[{id:"assign-code",name:"Assign code to paragraph",func:Xs,hotkeyLetter:"a",icon:"plus-circle"},{id:"rename-code",name:"Rename code",func:on,hotkeyLetter:"r",icon:"circle-slash"},{id:"unassign-code",name:"Remove code from paragraph",func:dn,hotkeyLetter:"d",icon:"minus-circle"},{id:"delete-code-everywhere",name:"Delete Code File and all references to it",func:tn,icon:"x-circle"},{id:"merge-codes",name:"Merge current Code File into another Code File",func:an,icon:"circle-dot"},{id:"bulk-create-new-code-files",name:"Bulk create new Code Files",func:qs,icon:"circle-dashed"},{id:"code-overview-codeblock",name:"Create/goto code overview file",func:Vs,icon:"circle-equal"}];var mt=require("obsidian");async function un(o){let{app:n,settings:a}=o,l=z(n);if(!l||Oe(l))return;if(E(o)!=="Data File"){new mt.Notice("You must be in a Data File to make an extraction.",5e3);return}if(Ke(l))return;let u=n.vault.getMarkdownFiles().filter(W=>W.name!=="Template.md"&&W.path.startsWith(a.extraction.folder+"/"));if(u.length===0){new mt.Notice("No extractions have been created yet.",3e3);return}let f=u.sort((W,Q)=>Q.stat.ctime-W.stat.ctime)[0],m=l.editorComponent.view.file,{blockId:g,lineWithoutId:x}=Xe(l);if(l.getLine(l.getCursor().line).includes(`[[${f.basename}]]`)){new mt.Notice("The paragraph already references the last Extraction File. Aborting.",4e3);return}let F=(await n.vault.read(f)).trim().split(`
`),C=`${m.path.slice(0,-3)}#${g}`,P=1+F.findIndex(W=>W.startsWith("extraction-source:"));if(P===0){new mt.Notice('Could not find "extraction-source:" property in last Extraction File. Aborting.',0);return}let w=P+F.slice(P).findIndex(W=>!W.startsWith("  - "));F.splice(w,0,`  - "[[${C}]]"`),F.push(`![[${C}]]`),F.push(""),await n.vault.modify(f,F.join(`
`)),et(l,f,f.basename,x,g)}var gt=require("obsidian");var Ur="yyyymmdd",Nl="8.15.12",hn={pluginVersion:Nl,model:{columns:[{id:"UUID",width:"WIDTH",content:"Source",sortDir:"default",isVisible:!1,type:"source",numberPrefix:"",numberSuffix:"",numberSeparator:"",numberFormat:"number",currencyType:"USD",dateFormat:Ur,dateFormatSeparator:"-",hour12:!1,includeTime:!1,shouldWrapOverflow:!1,tags:[],calculationType:"none",aspectRatio:"unset",horizontalPadding:"unset",verticalPadding:"unset",frontmatterKey:null},{id:"UUID",width:"WIDTH",content:"Extraction File",sortDir:"default",isVisible:!0,type:"source-file",numberPrefix:"",numberSuffix:"",numberSeparator:"",numberFormat:"number",currencyType:"USD",dateFormat:Ur,dateFormatSeparator:"-",hour12:!1,includeTime:!1,shouldWrapOverflow:!0,tags:[],calculationType:"count-all",aspectRatio:"unset",horizontalPadding:"unset",verticalPadding:"unset",frontmatterKey:null}],rows:[],filters:[{id:"UUID",columnId:"UUID",operator:"or",isEnabled:!0,type:"source-file",condition:"is-not",text:"Template"}],sources:[{id:"UUID",type:"folder",path:"PATH",includeSubfolders:!1}],settings:{numFrozenColumns:1,showCalculationRow:!1},externalRowOrder:[]}},fn={id:"UUID",type:"LOOM_TYPE",frontmatterKey:"DIMENSION",width:"WIDTH",sortDir:"default",isVisible:!0,numberPrefix:"",numberSuffix:"",numberSeparator:"",content:"",numberFormat:"number",currencyType:"USD",dateFormat:Ur,dateFormatSeparator:"-",hour12:!1,includeTime:!1,shouldWrapOverflow:!0,tags:[],calculationType:"none",aspectRatio:"unset",horizontalPadding:"unset",verticalPadding:"unset"};var ie=require("obsidian");async function pt(o,n){let{app:a,settings:l}=o,c=l.extraction.openingMode,u=a.workspace.getLeaf();if(c==="tab"){let f=u.parent;await a.workspace.createLeafInParent(f,f.children.length).openFile(n,$t)}else{let f=c==="right-split"?"right":"bottom",m=c==="right-split"?"vertical":"horizontal",g=a.workspace.getAdjacentLeafInDirection(u,f)||a.workspace.createLeafBySplit(u,m,!1);await g.openFile(n,$t),g.parent.setDimension(2)}}function Zt(o,n){o.vault.setConfig("propertiesInDocument","visible"),setTimeout(()=>{let a=o.workspace.getActiveViewOfType(ie.MarkdownView)?.metadataEditor.rendered[0];if(!a)return;a[n==="key"?"focusKey":"focusValue"]()},350)}function qt(o,n){let a=o.vault.getFileByPath(`${n.path}/Template.md`);if(!a){new ie.Notice(`ERROR: Could not find "Template.md" for Extraction Type "${n.name}".`,0);return}let l=o.metadataCache.getFileCache(a)?.frontmatter;if(!l){new ie.Notice(`ERROR: Properties of "Template.md" for Extraction Type "${n.name}" are invalid.`,0);return}return l}function Ee(o){let{app:n,settings:a}=o,l=n.vault.getFolderByPath(a.extraction.folder);if(!l){new ie.Notice("ERROR: Could not find Extraction Folder.",0);return}let c=l.children.filter(u=>u instanceof ie.TFolder&&u.children.find(f=>f.name==="Template.md"));if(c.length===0){let u=["ERROR: Could not find any valid Extraction Types.",'Check that the extraction folder has subfolders, and that the subfolder has a "Template.md" file.','You can also create a new extraction type with the command "Create new extraction type" or by pressing the button with the dashed box in the left sidebar.'].join(`

`);new ie.Notice(u,0);return}return c}function Ce(o){return o.children.filter(a=>a instanceof ie.TFile&&a.extension==="md"&&a.name!=="Template.md").length}function Ll(o,n){let a={text:"text",number:"number",checkbox:"checkbox",date:"date",datetime:"date",aliases:"multi-tag",tags:"multi-tag",multitext:"multi-tag"},l=o.metadataTypeManager.getPropertyInfo(n.toLowerCase())?.type;return a[l]||"text"}var $r=class extends Z{extractionTypes;constructor(n,a){super(n),this.settings=n.settings,this.extractionTypes=a,this.setPlaceholder("Select extraction type to create aggregation for")}getItems(){return this.extractionTypes}getItemText(n){let a=n.children.length-1;return`${n.name} (${a})`}async onChooseItem(n){Ze(this.app);let a=this.settings,l=qt(this.app,n);if(!l)return;let c=[...Object.keys(l),"extraction-source","extraction-date"],u=structuredClone(hn);if(!u.model?.filters[0]||!u.model?.sources[0]||!u.model?.columns[0]||!u.model?.columns[1]){new gt.Notice("ERROR: Loom Template invalid.",0);return}u.model.sources[0].path=n.path,u.model.sources[0].id=crypto.randomUUID(),u.model.filters[0].id=crypto.randomUUID(),u.model.columns[0].id=crypto.randomUUID();let f=crypto.randomUUID();u.model.filters[0].columnId=f,u.model.columns[1].id=f,u.model.columns[1].width="150px";for(let F of c){let C=structuredClone(fn);C.id=crypto.randomUUID(),C.frontmatterKey=F,C.content=F,C.type=Ll(this.app,F),C.width=F==="extraction-date"?"150px":"200px",u.model.columns.push(C)}let m=this.app.vault.getFolderByPath(a.analysis.folder);if(m||(m=await this.app.vault.createFolder(a.analysis.folder)),!m){new gt.Notice("ERROR: Could not create Analysis Folder.",0);return}let g=n.name,x;for(;x=`${a.analysis.folder}/${g} (Aggregation).loom`,!!this.app.vault.getFileByPath(x);)g+="_1";let T=await this.app.vault.create(x,JSON.stringify(u));await Mr(this.app,T)}};async function mn(o){let n=o.app;if(![...n.plugins.enabledPlugins].includes("notion-like-tables")){if(!Object.keys(n.plugins.plugins).includes("notion-like-tables")){new gt.Notice(`Plugin "DataLoom" not installed.

Please install it from the Obsidian Community Store.`,0);return}if(!await n.plugins.enablePluginAndSave("dataview")){new gt.Notice("ERROR: DataLoom plugin could not be enabled.",0);return}}let l=Ee(o);l&&new $r(o,l).open()}var Re=require("obsidian");var Hr=class extends Ne{onSubmit;nameOfNewType="";constructor(n,a){super(n),this.onSubmit=a}onOpen(){let{contentEl:n}=this;n.createEl("h4",{text:"New Extraction Type"}),n.addClass(this.plugin.cssclass);let a=c=>c!=="",l=()=>{this.close(),this.onSubmit(this.nameOfNewType)};new Re.Setting(n).setName("Name of the new type").addText(c=>{c.onChange(u=>{this.nameOfNewType=u.trim(),this.confirmationButton?.setDisabled(!a(u))}).inputEl.setCssProps({width:"100%","min-width":"20rem"}),c.inputEl.addEventListener("keydown",u=>{u.key==="Enter"&&a(this.nameOfNewType)&&(u.preventDefault(),l())})}),new Re.Setting(n).addButton(c=>{this.confirmationButton=c.setButtonText("Create").setCta().setDisabled(!0).onClick(l)}).addButton(c=>c.setButtonText("Cancel").onClick(()=>this.close()))}};function pn(o){let{app:n,settings:a}=o;new Hr(o,async l=>{l=l.replace(/\.md$/,"").replaceAll("/","_").replace(/[:#^?!"*<>|[\]\\]/g,"-").replace(/^\./,"");let c=(0,Re.normalizePath)(a.extraction.folder+"/"+l);await n.vault.createFolder(c),new Re.Notice(`Creating New Template for Extraction Type "${l}"`,6e3);let u=`---
dimension: 
---

`,f=["> [!NOTE] ",'> Due to a bug in DataLoom, properties of the type "List" must not have a space in them. You can work around that issue by using underscores or hyphens instead of a space.',"> ","> See <https://github.com/trey-wallis/obsidian-dataloom/issues/932>"].join(`
`),m=await n.vault.create(c+"/Template.md",u+f);await pt(o,m),n.commands.executeCommandById("file-explorer:reveal-active-file"),Zt(n,"key")}).open()}var yn=As(Er()),Se=require("obsidian");var Wl="-";function gn(o,n){return o.map(l=>`"${l.replaceAll('"','""')}"`).join(n)}async function wn(o){let{app:n,settings:a}=o,l=a.extraction.csvSeparator,c=Ee(o);if(!c)return;let u;for(let f of c){let m=[],g=qt(n,f);if(!g){let R=`Export of Extraction Type "${f.name}" is skipped, as the Templade.md has no valid properties.`;new Se.Notice(R,0);continue}let x=["File",...Object.keys(g),"extraction-date","extraction-source"],T=gn(x,l);m.push(T);let F=f.children.filter(R=>R instanceof Se.TFile&&R.name!=="Template.md");for(let R of F){let fe=n.metadataCache.getFileCache(R)?.frontmatter;if(!fe)continue;let oe=[];for(let Ae of x){if(Ae==="File"){oe.push(R.basename);continue}let U=fe[Ae]??Wl,Ue=typeof U!="object"?U.toString():Array.isArray(U)?U.join("; "):JSON.stringify(U);Ae==="extraction-source"&&(Ue=Ue.replace(/\[\[|\]\]/g,"")),oe.push(Ue)}let q=gn(oe,l);m.push(q)}let C=(0,Se.normalizePath)(a.analysis.folder+"/CSV Export");n.vault.getFolderByPath(C)||await n.vault.createFolder(C);let w=m.join(`
`),W=(0,yn.default)().format("YYYY-MM-DD_HH-mm-ss"),Q=(0,Se.normalizePath)(`${C}/${f.name}_${W}.csv`),$=await n.vault.create(Q,w),re=$?`Successfully exported "${f.name}".`:`ERROR: Export for "${f.name}" failed.`;new Se.Notice(re,$?5e3:0),!u&&$&&(u=$)}new Se.Notice("All CSV exports finished.",3500),u&&n.showInFolder(u.path)}var st=require("obsidian");var Vr=class extends Z{extractionTypes;editor;dataFile;constructor(n,a,l,c){super(n),this.extractionTypes=l,this.editor=a,this.dataFile=c,this.setPlaceholder("Select extraction type")}getItems(){return this.extractionTypes.sort((a,l)=>Ce(l)-Ce(a))}getItemText(n){if(!this.plugin.settings.extraction.displayCount)return jr.name;let l=Ce(n);return`${n.name} (${l}x)`}onChooseItem(n){jr(this.plugin,this.editor,this.dataFile,n)}};async function jr(o,n,a,l){let c=o.app;Ze(c);let u=l.name,f=l.path,m=c.vault.getFileByPath(`${f}/Template.md`);if(!m){new st.Notice(`ERROR: Could not find "Template.md" for Extraction Type "${u}".`,0);return}let g=await c.vault.cachedRead(m),{exists:x,frontmatter:T}=(0,st.getFrontMatterInfo)(g);if(!x){new st.Notice(`The file "Template.md" in the folder "${f}" does not contain valid metadata fields.

You need to add valid fields before you can make extractions.`,0),pt(o,m);return}let F,C=Ce(l);for(;;){C++;let fe=C.toString().padStart(3,"0");if(F=`${f}/${u} ${fe}.md`,!c.vault.getFileByPath(F))break}let{blockId:P,lineWithoutId:w}=Xe(n),W=new Date().toISOString().slice(0,-5),Q=`${a.path.slice(0,-3)}#${P}`,$=["---",...T.split(`
`),"extraction-date: "+W,"extraction-source:",`  - "[[${Q}]]"`,"---","","**Paragraph extracted from:**",`![[${Q}]]`].join(`
`),re=await c.vault.create(F,$),R=re.basename;et(n,re,R,w,P),await pt(o,re),Zt(c,"value")}function _n(o){let{app:n}=o,a=z(n);if(!a||Oe(a))return;if(E(o)!=="Data File"){new st.Notice("You must be in a Data File to make an extraction.",4e3);return}if(Ke(a)||Vt(n))return;let l=Ee(o);if(!l)return;let c=a.editorComponent.view.file;l.length===1?jr(o,a,c,l[0]):new Vr(o,a,l,c).open()}async function vn(o){let n=o.codeblockLabels.extractionOverview;await Ht(o,n,"Extraction Type Overview")}function Fn(o){let n=o.app,a=[];n.internalPlugins.plugins["global-search"].enable();let l=Ee(o);if(!l)return"\u26A0\uFE0F No valid extraction templates found.";for(let c of l){let u=n.vault.getFileByPath(c.path+"/Template.md");if(!u)continue;let f=n.metadataCache.getFileCache(u)?.frontmatter;if(!f){a.push(`\u26A0\uFE0F Invalid properties in template file for "${c.name}".`);continue}let m=`<a href="${u.path}" class="internal-link">${c.name}</a>`,g=Object.keys(f).map(T=>{let F=n.metadataTypeManager.getPropertyInfo(T)?.type||"",C=n.metadataCache.getFrontmatterPropertyValuesForKey(T),P=7,w="";C.length>0&&!F.startsWith("date")&&(w=C.slice(0,P).map($=>`<li><a href='${`obsidian://search?query=path:"${c.path}" ["${T}":"${$}"]`}'>${$}</a></li>`).join(""),C.length>P&&(w+=`<li><i>${C.length-P} more\u2026</i></li>`),w="<ul>"+w+"</ul>");let Q=w||(F?": "+F:"");return`<li><b>${T}</b>${Q}</li>`}),x=Ce(c);a.push(`<b>${m}</b> (${x}x)<ul>`+g.join("")+"</ul>")}return a.join("<br>")}var ae=require("obsidian");var Br=class extends Z{toBeMergedFile;toBeMergedFrontmatter;permaNotice;constructor(n,a){super(n),this.setPlaceholder(`Select Extraction File to merge "${a.basename}" into.`),this.toBeMergedFile=a,this.toBeMergedFrontmatter=this.app.metadataCache.getFileCache(this.toBeMergedFile)?.frontmatter||{};let l=`INFO
"Incongruence" refers to the dimensions that can not be automatically merged. The discarded values are saved, so you can manually fix the Extraction File after the merge operation.`;this.permaNotice=new ae.Notice(l,0)}onClose(){this.permaNotice.hide()}onNoSuggestion(){new ae.Notice("There must be at least two extractions of the same type to merge.",5e3),this.close()}getDiscardedProperties(n){let{app:a,settings:l}=this,c=a.metadataCache.getFileCache(n)?.frontmatter||{},u={};for(let f in this.toBeMergedFrontmatter){let m=c[f],g=this.toBeMergedFrontmatter[f],x=Array.isArray(m)&&Array.isArray(g),T=!m&&m!==0||!g&&g!==0,F=m===g,C=l.extraction.ignorePropertyOnMerge.includes(f);x||T||F||C||(u[f]=m)}return u}getItems(){return this.toBeMergedFile.parent.children.filter(l=>l instanceof ae.TFile&&l.extension==="md"&&l.name!=="Template.md"&&l.path!==this.toBeMergedFile.path).sort((l,c)=>c.stat.mtime-l.stat.mtime)}getItemText(n){let a=Object.keys(this.getDiscardedProperties(n)).length,l=a>0?`    (${a}x incongruent)`:"";return n.basename+l}async onChooseItem(n){let{plugin:a,app:l}=this,c=this.getDiscardedProperties(n);a.trashWatcherUninstaller&&a.trashWatcherUninstaller(),await l.fileManager.mergeFile(n,this.toBeMergedFile,"",!1),a.trashWatcherUninstaller=rt(a);let u=n,f=(await l.vault.read(u)).replaceAll(`**Paragraph extracted from:**
`,"").replaceAll(`


`,`
`);if(Object.keys(c).length>0){let x=["","#### Properties that could be not be automatically merged",...(0,ae.stringifyYaml)(c).trim().split(`
`).map(F=>"- "+F),"","---",""].join(`
`),T=(0,ae.getFrontMatterInfo)(f).contentStart;f=f.slice(0,T)+x+f.slice(T)}setTimeout(async()=>await l.vault.modify(u,f),500),new ae.Notice(`"${this.toBeMergedFile.basename}" merged into "${n.basename}".`,5e3)}};function xn(o){let n=z(o.app);if(!n)return;if(E(o)!=="Extraction File"){new ae.Notice("You must be in the Extraction File for this.",3e3);return}let a=n.editorComponent.view.file;new Br(o,a).open()}var Tn=[{id:"extract-from-paragraph",name:"Extract from paragraph",func:_n,hotkeyLetter:"e",icon:"plus-square"},{id:"extract-to-last-extraction-file",name:"Add paragraph to last Extraction File",func:un,hotkeyLetter:"l",icon:"square-asterisk"},{id:"merge-extractions",name:"Merge current Extraction File into another Extraction File",func:xn,icon:"square-dot"},{id:"aggregate-extractions",name:"Aggregate extractions",func:mn,icon:"sigma-square"},{id:"create-new-extraction-type",name:"Create new Extraction Type",func:pn,icon:"box-select"},{id:"export-all-extractions-as-csv",name:"Export all extractions as .csv",func:wn,icon:"arrow-up-square"},{id:"extractiontypes-overview",name:"Create/Goto extraction type overview file",func:vn,icon:"square-equal"}];function yt(o){let n=o.settings.suppressSuggestionInFields.map(l=>`[data-property-key="${l}"]`).join(", "),a=n?`.app-container:has(.metadata-property:is(${n}) :is(.metadata-input-longtext, .multi-select-container):focus-within) ~ .suggestion-container{ display: none; }`:"";if(!o.styleElSuppressSuggestionsInFields){let l=activeDocument.createElement("style");l.addClass(o.cssclass),l.setAttribute("type","text/css"),activeDocument.head.appendChild(l),o.register(()=>l?.detach()),o.styleElSuppressSuggestionsInFields=l}o.styleElSuppressSuggestionsInFields.textContent=a,o.app.workspace.trigger("css-change")}function Jt(o){let a=`body .metadata-property-key { min-width: ${o.settings.propertiesKeysWidthPercent}% }`;if(!o.styleElPropertyKeyWidth){let l=activeDocument.createElement("style");l.addClass(o.cssclass),l.setAttribute("type","text/css"),activeDocument.head.appendChild(l),o.register(()=>l?.detach()),o.styleElPropertyKeyWidth=l}o.styleElPropertyKeyWidth.textContent=a,o.app.workspace.trigger("css-change")}var B=require("obsidian");function Qr(o){return(0,B.normalizePath)(o).replace(/:/g,"-")}var Xt=class extends B.PluginSettingTab{plugin;constructor(n){super(n.app,n),this.plugin=n}display(){let{containerEl:n}=this,a=this.plugin.settings,l={"min-width":"15rem"};n.empty(),n.addClass(this.plugin.cssclass),new B.Setting(n).setName("Properties without suggestions").setDesc("List of properties, one per line, for which suggestions should be surppressed. This is useful for dimensions which are intended for unique content that is not going to be repeated in other Code Files or Extraction Files.").addTextArea(c=>c.setPlaceholder("One property per line").setValue(a.suppressSuggestionInFields.join(`
`)).onChange(async u=>{let f=u.split(`
`).map(m=>m.trim()).filter(m=>m!=="");a.suppressSuggestionInFields=f,await this.plugin.saveSettings(),yt(this.plugin)}).inputEl.setCssProps({"min-height":"5rem","min-width":"15rem"})),new B.Setting(n).setName("Width of property keys").setDesc("Minimum width of keys in the list of properties, in percent.").addSlider(c=>c.setLimits(20,60,5).setDynamicTooltip().setValue(a.propertiesKeysWidthPercent).onChange(async u=>{a.propertiesKeysWidthPercent=u,await this.plugin.saveSettings(),Jt(this.plugin)})),n.createEl("h3",{text:"Coding"}),new B.Setting(n).setName("Code folder").setDesc("Location where the Code Files are stored.").addSearch(c=>{new Le(this.plugin,c.inputEl),c.setPlaceholder(he.coding.folder).setValue(a.coding.folder).onChange(async u=>{a.coding.folder=Qr(u)||he.coding.folder,await this.plugin.saveSettings()}).inputEl.setCssProps(l)}),new B.Setting(n).setName("Code count").setDesc("When selecting a code to assign, show a count of how often the code has already been assigned. (Note that this is a methodological decision, as it may influence your choice of codes.)").addToggle(c=>c.setValue(a.coding.displayCount).onChange(async u=>{a.coding.displayCount=u,await this.plugin.saveSettings()})),new B.Setting(n).setName("Sort order").setDesc("When selecting a code to assign, method by which the codes are ordered. (Note that this is a methodological decision, as it may influence your choice of codes.)").addDropdown(c=>{for(let u in jt)c.addOption(u,u);c.setValue(a.coding.sortFunc).onChange(async u=>{a.coding.sortFunc=u,await this.plugin.saveSettings()})}),n.createEl("h3",{text:"Extraction"}),new B.Setting(n).setName("Extraction folder").setDesc("Location where the Extraction Files are stored.").addSearch(c=>{new Le(this.plugin,c.inputEl),c.setPlaceholder(he.extraction.folder).setValue(a.extraction.folder).onChange(async u=>{a.extraction.folder=Qr(u)||he.extraction.folder,await this.plugin.saveSettings()}).inputEl.setCssProps(l)}),new B.Setting(n).setName("Extraction count").setDesc("When selecting an extraction type, show a count of how often the type has been extracted.(Note that this is a methodological decision, as it may influence your choice of codes.)").addToggle(c=>c.setValue(a.extraction.displayCount).onChange(async u=>{a.extraction.displayCount=u,await this.plugin.saveSettings()})),new B.Setting(n).setName("Location of extraction window").setDesc("When creating a new extraction, a new split window opens. This setting determines where that window opens.").addDropdown(c=>{c.addOptions($s).setValue(a.extraction.openingMode).onChange(async u=>{a.extraction.openingMode=u,await this.plugin.saveSettings()})}),new B.Setting(n).setName("Ignore properties on merging").setDesc("List of properties, one per line, which should not trigger manual incongruence resolvement when merging Extraction Files. The properties are still added to the frontmatter, there merging just happens automatically without considering potential conflicts. This is intended for properties where it does not matter which value is chosen, such as IDs. ").addTextArea(c=>c.setPlaceholder("One property per line").setValue(a.extraction.ignorePropertyOnMerge.join(`
`)).onChange(async u=>{let f=u.split(`
`).map(m=>m.trim()).filter(m=>m!=="");a.extraction.ignorePropertyOnMerge=f,await this.plugin.saveSettings(),yt(this.plugin)}).inputEl.setCssProps({"min-height":"5rem","min-width":"15rem"})),new B.Setting(n).setName("CSV separator").setDesc("Separator used when exporting extractions as csv files.").addDropdown(c=>{c.addOptions(Us).setValue(a.extraction.csvSeparator).onChange(async u=>{a.extraction.csvSeparator=u,await this.plugin.saveSettings()})}),n.createEl("h4",{text:"Analysis"}),new B.Setting(n).setName("Analysis folder").setDesc("Location where aggregations, overviews, and exports are stored.").addSearch(c=>{new Le(this.plugin,c.inputEl),c.setPlaceholder(he.analysis.folder).setValue(a.analysis.folder).onChange(async u=>{a.analysis.folder=Qr(u)||he.analysis.folder,await this.plugin.saveSettings()}).inputEl.setCssProps(l)})}};function er(o){let{app:n,statusbar:a,settings:l}=o,c=[],u=E(o),f=n.workspace.getActiveFile();if(!f||!u||u==="Template"){a.setText("");return}if(u==="Code File"){let F=ft(o,f);c.push(`Code ${F}x assigned`)}else if(u==="Extraction File"){let T=f.parent;if(T){let F=Ce(T);c.push(`${F}x extracted`)}}else if(u==="Data File"){let T=n.metadataCache.resolvedLinks[f.path]||{},F=0,C=0;for(let[P,w]of Object.entries(T))P.startsWith(l.coding.folder+"/")&&(F+=w),P.startsWith(l.extraction.folder+"/")&&C++;F>0&&c.push(`${F} Codes`),C>0&&c.push(`${C} Extractions`)}let m=n.metadataCache.unresolvedLinks[f.path]||{},g=0;for(let[T,F]of Object.entries(m))g+=F;g>0&&c.push(`${g} invalid links`);let x=c.map(T=>T.replace(/^(1 .*)s$/,"$1")).join(", ");a.setText(x)}var tr=class extends Cn.Plugin{styleElSuppressSuggestionsInFields;styleElPropertyKeyWidth;cssclass=this.manifest.id;codeblockLabels={extractionOverview:"quadro-extractiontypes-overview",codeOverview:"quadro-code-overview"};statusbar=this.addStatusBarItem();trashWatcherUninstaller;settings=he;async onload(){console.info(this.manifest.name+" Plugin loaded.");for(let n of[...cn,...Tn]){let a=this.addRibbonIcon(n.icon,`Quadro: ${n.name}`,()=>n.func(this));a.addClass(this.cssclass),a.setCssProps({border:"1px solid var(--text-faint)"});let l={id:n.id,name:n.name,icon:n.icon,editorCallback:async()=>n.func(this)};n.hotkeyLetter&&(l.hotkeys=[{modifiers:["Mod","Shift"],key:n.hotkeyLetter}]),this.addCommand(l)}this.statusbar.addClass(this.cssclass),er(this),this.registerEvent(this.app.workspace.on("file-open",()=>er(this))),this.registerEvent(this.app.metadataCache.on("resolved",()=>er(this))),this.trashWatcherUninstaller=rt(this),await this.loadSettings(),this.addSettingTab(new Xt(this)),yt(this),Jt(this),Ze(this.app),this.registerMarkdownCodeBlockProcessor(this.codeblockLabels.codeOverview,(n,a)=>{a.innerHTML=Bs(this),a.addClass(this.cssclass)}),this.registerMarkdownCodeBlockProcessor(this.codeblockLabels.extractionOverview,(n,a)=>{a.innerHTML=Fn(this),a.addClass(this.cssclass)})}onunload(){this.trashWatcherUninstaller&&this.trashWatcherUninstaller(),console.info(this.manifest.name+" Plugin unloaded.")}async loadSettings(){this.settings=Object.assign({},he,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};
/*! Bundled license information:

moment/moment.js:
  (*! moment.js *)
  (*! version : 2.29.4 *)
  (*! authors : Tim Wood, Iskren Chernev, Moment.js contributors *)
  (*! license : MIT *)
  (*! momentjs.com *)
*/
