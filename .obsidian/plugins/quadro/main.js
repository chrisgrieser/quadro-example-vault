/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var V=Object.defineProperty;var Pe=Object.getOwnPropertyDescriptor;var Le=Object.getOwnPropertyNames;var $e=Object.prototype.hasOwnProperty;var _e=(t,e)=>{for(var o in e)V(t,o,{get:e[o],enumerable:!0})},Be=(t,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Le(e))!$e.call(t,i)&&i!==o&&V(t,i,{get:()=>e[i],enumerable:!(n=Pe(e,i))||n.enumerable});return t};var Me=t=>Be(V({},"__esModule",{value:!0}),t);var qe={};_e(qe,{default:()=>H});module.exports=Me(qe);var De=require("obsidian");var v=require("obsidian");function Ge(t){return Math.ceil(Math.random()*10**t).toString().padStart(t,"0")}var We=/\^[\w-]+(?=\n|$)/g,X=/\^[\w-]+$/,le=/^!\[\[(.+?)#(\^[\w-]+)\]\]$/;async function G(t,e){let[o]=e.match(X)||[];if(o){let s=e.slice(0,-o.length).trim();return{blockId:o,lineWithoutId:s}}let i=(await t.vault.cachedRead(t)).match(We)||[],r;do r="^id-"+Ge(6);while(i.includes(r));return{blockId:r,lineWithoutId:e.trim()}}var u="Codes",ce={char:"\u{1FB0B}",charsPerBlock:100,maxLength:100},Ue={alphabeticalByCodeName:(t,e)=>t.basename.localeCompare(e.basename),alphabeticalByFullCode:(t,e)=>{let o=t.path.slice(u.length+1),n=e.path.slice(u.length+1);return o.localeCompare(n)},lastUsedFirst:(t,e)=>e.stat.mtime-t.stat.mtime,oldestUsedFirst:(t,e)=>t.stat.mtime-e.stat.mtime,frequentlyUsedFirst:(t,e)=>e.stat.size-t.stat.size,rarelyUsedFirst:(t,e)=>t.stat.size-e.stat.size,randomOrder:()=>Math.random()-.5},de=Ue.lastUsedFirst,f="Extractions",I="Analysis",me=";",ue="-";var L=require("obsidian");function h(t,e){let o=e==="Codes"?u:f,n=t.workspace.getActiveFile();return n?!!n.path.startsWith(o+"/"):!1}function $(t){return t.path.slice(u.length+1,-3)}function T(t){let e=t.workspace.getActiveViewOfType(L.MarkdownView);return e?e.editor:(new L.Notice("No active editor."),null)}var w=[{command:"\u2191\u2193",purpose:"Navigate"},{command:"\u23CE",purpose:"Select"},{command:"esc",purpose:"Dismiss"}];function W(t){let e=`.workspace-leaf.mod-active .metadata-property:first-of-type .metadata-property-${t} :is([contenteditable='true'], input)`,o=document.querySelector(e);o instanceof HTMLElement&&je(o,0),o instanceof HTMLInputElement&&o.select()}function je(t,e){if(t instanceof HTMLInputElement){t.focus();let o=t.getAttribute("type")==="number";o&&t.setAttribute("type","text"),t.setSelectionRange(e,e),o&&t.setAttribute("type","number")}else{let o=document.createRange(),n=window.getSelection();o.setStart(t,e),o.collapse(!0),n?.removeAllRanges(),n?.addRange(o)}}var Y={state:{source:!1,mode:"source"}};async function _(t,e){let o=t.workspace.getLeaf();await(t.workspace.getAdjacentLeafInDirection(o,"right")||t.workspace.createLeafBySplit(o,"vertical",!1)).openFile(e,Y)}function R(t){let e=t.getCursor("head").line!==t.getCursor("anchor").line,o=t.listSelections().length>1;return e||o?(new L.Notice(`Paragraph not unambiguous since multiple lines are selected.

Unselect, move your cursor to the paragraph you want to affect, and use the command again.`,5e3),!0):!1}var m=require("obsidian");var K=class extends m.Modal{constructor(o,n){super(o);this.fullCode="";this.codeDesc="";this.confirmationButton=null;this.onSubmit=n,this.modalEl.addClass("quadro")}onOpen(){let{contentEl:o}=this;o.createEl("h4",{text:"New code creation"}),new m.Setting(o).setName("Name of the Code").setDesc('Use a slash ("/") in the name to create the Code File in a subfolder (group).').addText(n=>n.onChange(i=>{this.fullCode=i.trim(),this.confirmationButton?.setDisabled(this.fullCode==="")})),new m.Setting(o).setName("Code Description").setDesc('Will be added as metadata with the key "description".').addText(n=>n.onChange(i=>{this.codeDesc=i.trim()})),new m.Setting(o).addButton(n=>{this.confirmationButton=n.setButtonText("Create").setCta().setDisabled(!0).onClick(()=>{this.close(),this.onSubmit(this.fullCode,this.codeDesc)})}).addButton(n=>n.setButtonText("Cancel").onClick(()=>this.close()))}onClose(){let{contentEl:o}=this;o.empty()}},Q=class extends m.Modal{constructor(o,n){super(o);this.input="";this.confirmationButton=null;this.onSubmit=n,this.modalEl.addClass("quadro")}onOpen(){let{contentEl:o}=this;o.createEl("h4",{text:"Bulk-create new codes"}),o.createEl("p",{text:"Every line will result in a new code file."}),o.createEl("p",{text:'Use a slash ("/") in the name to create the Code File in a subfolder (group).'}),new m.Setting(o).setClass("quadro-bulk-code-creation").addTextArea(n=>n.onChange(i=>{this.input=i.trim(),this.confirmationButton?.setDisabled(this.input==="")})),new m.Setting(o).addButton(n=>{this.confirmationButton=n.setButtonText("Create").setCta().setDisabled(!0).onClick(()=>{this.close(),this.onSubmit(this.input)})}).addButton(n=>n.setButtonText("Cancel").onClick(()=>this.close()))}onClose(){let{contentEl:o}=this;o.empty()}};async function pe(t,e,o){e=e.replace(/\.md$/,"").replace(/[:#^?!"*<>|[\]\\]/g,"-").replace(/^\.|\/\./g,"");let n=(0,m.normalizePath)(`${u}/${e}.md`);if(t.vault.getAbstractFileByPath(n)instanceof m.TFile)return new m.Notice(`Code "${e}" already exists, Code File not created.`),!1;let r=e.split("/"),s=r.pop(),c=r.length?"/"+r.join("/"):"",a=u+c;t.vault.getFolderByPath(a)||await t.vault.createFolder(a),o=o.replaceAll('"',"'");let d=`---
description: "${o}"
---


---

`;return await t.vault.create(`${a}/${s}.md`,d)}function he(t,e){new K(t,async(o,n)=>{let i=await pe(t,o,n);i?(new m.Notice(`Created new code file: "${o}"`),e(i)):new m.Notice("File creation failed.")}).open()}async function fe(t){new Q(t,async e=>{let o=0,n=[];for(let r of e.split(`
`))await pe(t,r,"")?o++:n.push(r);let i=`${o} file(s) created`;n.length>0&&(i+=`
Could not create: `+n.join(", ")),new m.Notice(i,(n.length+2)*1e3)}).open()}var J=class extends v.FuzzySuggestModal{constructor(e,o,n,i){super(e),this.editor=o,this.codesInPara=n,this.dataFile=i,this.setPlaceholder("Select code to assign"),this.setInstructions([...w,{command:'type "new"',purpose:"Create new code"}]),this.modalEl.addClass("quadro")}getItems(){let e=this.app.vault.getMarkdownFiles().filter(o=>{let n=o.path.startsWith(u+"/"),i=this.codesInPara.find(r=>r.path===o.path);return n&&!i}).sort(de);return e.push("new-code-file"),e}getItemText(e){if(e==="new-code-file")return"\u{1F79C} Create new code";let{char:o,charsPerBlock:n,maxLength:i}=ce,r="    "+o.repeat(Math.min(i,e.stat.size/n));return $(e)+r}onChooseItem(e){e instanceof v.TFile?this.assignCode(e,this.dataFile):he(this.app,o=>this.assignCode(o,this.dataFile))}async assignCode(e,o){let n=this.editor.getCursor(),i=$(e),r=this.editor.getLine(n.line),s=this.editor.getSelection();if(s){let x=s.replace(/^( ?)(.+?)( ?)$/g,"$1==$2==$3");this.editor.replaceSelection(x),r=this.editor.getLine(n.line)}let{blockId:c,lineWithoutId:a}=await G(o,r),l=`${a} [[${i}]] ${c}`;this.editor.setLine(n.line,l),this.editor.setCursor(n);let p=`![[${o.path.slice(0,-3)}#${c}]]
`;await this.app.vault.append(e,p)}};function ge(t){let e=T(t);if(!e||R(e))return;if(h(t,"Codes")||h(t,"Extractions")){new v.Notice("You must be in a Data File to assign a code.",3e3);return}if(e.getSelection().includes("==")){new v.Notice(`Selection contains highlights.
Overlapping highlights are not supported.`);return}let n=e.editorComponent.view.file,s=(e.getLine(e.getCursor().line).match(/\[\[.+?\]\]/g)||[]).reduce((c,a)=>{a=a.slice(2,-2);let l=t.metadataCache.getFirstLinkpathDest(a,n.path);return l instanceof v.TFile&&l.path.startsWith(u+"/")&&c.push(l),c},[]);new J(t,e,s,n).open()}var y=require("obsidian");var g=require("obsidian");var Z=class extends g.FuzzySuggestModal{constructor(e,o,n,i){super(e),this.codesInParagraph=i,this.dataFile=n,this.editor=o,this.setPlaceholder("Select code to remove from paragraph"),this.setInstructions(w),this.modalEl.addClass("quadro")}getItems(){return this.codesInParagraph}getItemText(e){return $(e.tFile)}onChooseItem(e){Ce(this.editor,this.dataFile,e)}};async function ee(t,e,o,n){let i=(await t.vault.read(o)).split(`
`),r=i.findIndex(l=>l.endsWith(n));if(r<0)return`Data File "${o.basename}", has no line with the ID "${n}".`;let s=i[r]||"",a=(s.match(/\[\[.+?\]\]/g)||[]).find(l=>{l=l.slice(2,-2);let d=t.metadataCache.getFirstLinkpathDest(l,o.path);return d instanceof g.TFile&&d.path===e.path});return a?(i[r]=s.replace(a,"").replace(/ {2,}/g," "),await t.vault.modify(o,i.join(`
`)),""):`Data File "${o.basename}", line "${n}" has no valid link to the Code File.`}async function Ce(t,e,o){let n=t.editorComponent.app,i=t.getCursor().line,r=t.getLine(i),s=new RegExp(" ?\\[\\["+o.wikilink+"\\]\\]");t.setLine(i,r.replace(s,""));let[c]=r.match(X)||[];if(!c){new g.Notice(`No ID found in current line.
Reference in Code File thus not deleted.`);return}let a=(await n.vault.read(o.tFile)).split(`
`),l=a.findIndex(d=>{if(!d.includes(c))return!1;let p=d.match(/\[\[.+?\]\]/g)||[];for(let x of p){let O=x.slice(2,-2).split("#")[0]||"";if(n.metadataCache.getFirstLinkpathDest(O,o.tFile.path)?.path===e.path)return!0}return!1});if(l<0){new g.Notice(`"Code File "${o.tFile.basename}" contains not reference to Data File "${e.basename}" with the ID "${c}". Reference in Code File is thus not deleted.`,7e3);return}a.splice(l,1),await n.vault.modify(o.tFile,a.join(`
`)),new g.Notice(`Assignment of code "${o.tFile.basename}" removed.`)}async function ze(t,e){let o=e.getLine(e.getCursor().line),[n,i,r]=o.match(le)||[],s=e.editorComponent.view.file,c=t.metadataCache.getFirstLinkpathDest(i||"",s.path);if(!r||!i||!c){new g.Notice("Current line has no correct reference.");return}let a=await ee(t,s,c,r);if(a){new g.Notice(a+`

Aborting removal of Code.`,4e3);return}t.commands.executeCommandById("editor:delete-paragraph"),e.setCursor({line:e.getCursor().line,ch:0}),new g.Notice(`Assignment of code "${s.basename}" removed.`)}async function Fe(t){let e=T(t);if(!(!e||R(e)))if(h(t,"Codes"))ze(t,e);else{let o=e.editorComponent.view.file,r=(e.getLine(e.getCursor().line).match(/\[\[.+?\]\]/g)||[]).reduce((s,c)=>{c=c.slice(2,-2);let a=t.metadataCache.getFirstLinkpathDest(c,o.path);return a instanceof g.TFile&&a.path.startsWith(u+"/")&&s.push({tFile:a,wikilink:c}),s},[]);r.length===0?new g.Notice("Line does not contain any valid codes."):r.length===1?Ce(e,o,r[0]):new Z(t,e,o,r).open()}}var te=!1;async function Te(t,e){if(!(e instanceof y.TFile)||!e.path.startsWith(u+"/")||te)return;if(t.vault.config.trashOption!=="local"){let n=`Code Files should be deleted via the "Delete Code Everywhere" command to ensure that references to it are correctly deleted as well.

Please restore the file and delete it again with that command, or set the trash location to "local" in your Obsidian config to have Quadroautomantically handle deletions.`;new y.Notice(n,15e3);return}let o=".trash/"+e.name;if(!await t.vault.adapter.exists(o)){let n=`Could not remove references to the Code File.

Please restore the file use the "Delete Code Everywhere" command.`;new y.Notice(n,7e3);return}await t.vault.adapter.rename(o,e.path),setTimeout(async()=>{te=!0,await xe(t,e),te=!1},1e3)}async function Ee(t){let e=T(t);if(!e)return;if(!h(t,"Codes")){new y.Notice("Must be in Code File to delete the code everywhere.");return}let o=e.editorComponent.view.file;xe(t,o)}async function xe(t,e){let n=(t.metadataCache.getFileCache(e)?.embeds||[]).map(c=>c.link).reduce((c,a)=>{let[l,d]=a.split("#");if(!l||!d)return c;let p=t.metadataCache.getFirstLinkpathDest(l,e.path);return p instanceof y.TFile&&c.push({file:p,blockId:d}),c},[]),i=[];for(let{file:c,blockId:a}of n){let l=await ee(t,e,c,a);l&&i.push(l)}await t.vault.trash(e,!0);let r=n.length-i.length,s=`Code File "${e.basename}" and ${r} references to it deleted.
`;i.length>0&&(s+=`
\u26A0\uFE0F ${i.length} references could not be deleted:
- `+i.join(`
- `)),new y.Notice(s,(5+i.length)*1700)}var U=require("obsidian");function we(t){h(t,"Codes")?t.commands.executeCommandById("workspace:edit-file-title"):new U.Notice("You must be in a code file.")}function ve(t){h(t,"Codes")?(t.internalPlugins.plugins["note-composer"]?.enable(),new U.Notice("Select a Code File from the list."),t.commands.executeCommandById("note-composer:merge-file")):new U.Notice("You must be in a code file.")}var ye=[{id:"assign-code",name:"Assign code to paragraph",func:ge,hotkeyLetter:"a",ribbonIcon:"plus-circle"},{id:"rename-code",name:"Rename code",func:we,hotkeyLetter:"r",ribbonIcon:"circle-slash"},{id:"unassign-code",name:"Delete code from paragraph",func:Fe,hotkeyLetter:"d",ribbonIcon:"minus-circle"},{id:"delete-code-everywhere",name:"Delete code file and all references to it",func:Ee,ribbonIcon:"x-circle"},{id:"merge-codes",name:"Merge codes",func:ve,ribbonIcon:"radius"},{id:"bulk-create-new-code-files",name:"Bulk create new code files",func:fe,ribbonIcon:"circle-dashed"}];var S=require("obsidian");var A=require("obsidian");function j(t,e){let o=t.vault.getFileByPath(`${e.path}/Template.md`);if(!o){new A.Notice(`ERROR: Could not find "Template.md" for Extraction Type "${e.name}".`,5e3);return}let n=t.metadataCache.getFileCache(o)?.frontmatter;if(!n){new A.Notice(`ERROR: Properties of "Template.md" for Extraction Type "${e.name}" are invalid.`,5e3);return}return n}function z(t){let e=t.vault.getFolderByPath(f);if(!e){new A.Notice("ERROR: Could not find Extraction Folder.",4e3);return}let o=e.children.filter(n=>n instanceof A.TFolder);if(o.length===0){new A.Notice("ERROR: Could not find any Extraction Types.",4e3);return}return o}var oe=class extends S.FuzzySuggestModal{constructor(e,o){super(e),this.extractionTypes=o,this.setPlaceholder("Select extraction type to create aggregation for"),this.setInstructions(w),this.modalEl.addClass("quadro")}getItems(){return this.extractionTypes}getItemText(e){let o=e.children.length-1;return`${e.name} (${o})`}async onChooseItem(e){let o=j(this.app,e);if(!o)return;let n=Object.keys(o).map(d=>"	"+d.replaceAll(" ","-")+",");n.push("	extraction-source");let i=["```dataview","TABLE",...n,`FROM "${e.path}"`,'WHERE file.name != "Template"',"SORT extraction-date ASC","```","","---","","You can customize the table by modifying the Dataview Query: [Documentation of Dataview Queries](https://blacksmithgu.github.io/obsidian-dataview/queries/structure/)","","If you have the [Sortable](https://obsidian.md/plugins?id=obsidian-sortable) plugin installed, you can click on the header row of a column to sort the table by that column. (The plugin is pre-installed, if you use the Quadro Example Vault.)"].join(`
`),r=this.app.vault.getFolderByPath(f);if(r||(r=await this.app.vault.createFolder(I)),!r){new S.Notice("ERROR: Could not create Analysis Folder.",4e3);return}let s=e.name,c;for(;c=`${I}/${s}.md`,!!this.app.vault.getFileByPath(c);)s+="_1";let a=await this.app.vault.create(c,i);await this.app.workspace.getLeaf().openFile(a,Y),this.app.commands.executeCommandById("file-explorer:reveal-active-file");let l=T(this.app);l&&l.setCursor(l.lastLine(),0)}};async function be(t){if(![...t.plugins.enabledPlugins].includes("dataview")){if(!Object.keys(t.plugins.plugins).includes("dataview")){new S.Notice(`Plugin "Dataview" not installed.

Please install it from the Obsidian Community Store.`,7e3);return}if(!await t.plugins.enablePluginAndSave("dataview")){new S.Notice("ERROR: Dataview plugin could not be enabled.",4e3);return}}let o=z(t);o&&new oe(t,o).open()}var C=require("obsidian");var ne=class extends C.Modal{constructor(o,n){super(o);this.nameOfNewType="";this.confirmationButton=null;this.onSubmit=n,this.modalEl.addClass("quadro")}onOpen(){let{contentEl:o}=this;o.createEl("h4",{text:"New Extraction Type"}),new C.Setting(o).setName("Name of the new type").addText(n=>n.onChange(i=>{this.nameOfNewType=i.trim(),this.confirmationButton?.setDisabled(this.nameOfNewType==="")})),new C.Setting(o).addButton(n=>{this.confirmationButton=n.setButtonText("Create").setCta().setDisabled(!0).onClick(()=>{this.close(),this.onSubmit(this.nameOfNewType)})}).addButton(n=>n.setButtonText("Cancel").onClick(()=>this.close()))}onClose(){let{contentEl:o}=this;o.empty()}};function ie(t){new ne(t,async e=>{e=e.replace(/\.md$/,"").replaceAll("/","_").replace(/[:#^?!"*<>|[\]\\]/g,"-").replace(/^\./,"");let o=(0,C.normalizePath)(f+"/"+e);if(!(await t.vault.createFolder(o)instanceof C.TFolder)){new C.Notice("ERROR: Could not create Extraction Type Folder.",3e3);return}re(t,e)}).open()}async function re(t,e){new C.Notice(`Creating New Template for Extraction Type "${e}"`,6e3);let o=(0,C.normalizePath)(`${f}/${e}/Template.md`),i=await t.vault.create(o,`---
dimension: 
---

`);await _(t,i),t.commands.executeCommandById("file-explorer:reveal-active-file"),W("key")}function Ie(t){ie(t)}var k=require("obsidian");function Ae(t){return t.map(o=>`"${o.replace(/"/g,'""')}"`).join(me)}async function Re(t){let e=z(t);if(e){for(let o of e){let n=[],i=j(t,o);if(!i){new k.Notice(`Export of Extraction Type "${o.name}" is skipped.`,5e3);continue}let r=["File",...Object.keys(i),"extraction date","extraction source"],s=Ae(r);n.push(s);let c=o.children.filter(F=>F instanceof k.TFile&&F.name!=="Template.md");for(let F of c){let B=t.metadataCache.getFileCache(F)?.frontmatter;if(!B)continue;let D=[];D.push(F.basename);for(let N of r){if(N==="File")continue;let b=B[N]??ue,P=typeof b!="object"?b.toString():Array.isArray(b)?b.join(", "):JSON.stringify(b);N==="extraction source"&&(P=P.slice(2,-2)),D.push(P)}let se=Ae(D);n.push(se)}t.vault.getFolderByPath(I)||await t.vault.createFolder(I);let l=n.join(`
`),d,p=o.name;for(;d=`${I}/${p}.csv`,!!t.vault.getFileByPath(d);)p+="_1";let O=await t.vault.create(d,l)?`Successfully exported "${o.name}".`:`ERROR: Export for "${o.name}" failed.`;new k.Notice(O,5e3)}new k.Notice('All CSV exports finished. The file(s) have been placed in the "Analysis" folder.',5e3)}}var E=require("obsidian");var ae=class extends E.FuzzySuggestModal{constructor(e,o,n,i){super(e),this.extractionTypes=n,this.editor=o,this.dataFile=i,this.setPlaceholder("Select extraction type"),this.setInstructions(w),this.modalEl.addClass("quadro")}getItems(){return this.extractionTypes}getItemText(e){let o=e.children.find(r=>r instanceof E.TFile&&r.name==="Template.md"),n=e.children.length-1,i=o?`  (${n})`:'  [Select to create "Template.md"]';return e.name+i}onChooseItem(e){Se(this.editor,this.dataFile,e)}};async function Se(t,e,o){let n=t.editorComponent.app,i=o.name,r=o.path,s=n.vault.getFileByPath(`${r}/Template.md`);if(!s){re(n,i);return}let a=(await n.vault.cachedRead(s)).trim().split(`
`);if(!(a.filter(M=>M==="---").length===2)){new E.Notice(`The file "Template.md" in the folder "${r}" does not contain valid metadata fields.

You need to add valid fields before you can make extractions.`,6e3),_(n,s);return}let d,p=o.children.length-1;for(;p++,d=`${r}/${p}.md`,!!n.vault.getFileByPath(d););let x=t.getCursor(),O=t.getLine(x.line),{blockId:F,lineWithoutId:B}=await G(e,O),D=`${B} [[${i}/${p}]] ${F}`;t.setLine(x.line,D),t.setCursor(x);let N=`extraction date: ${new Date().toISOString().slice(0,-5)}`,b=`extraction source: "[[${e.path}#${F}]]"`,P=a.findLastIndex(M=>M==="---");a.splice(P,0,N,b),a.push("",`**Paragraph extracted from:** ![[${e.path}#${F}]]`);let Ne=await n.vault.create(d,a.join(`
`));await _(n,Ne),W("value")}async function ke(t){let e=T(t);if(!e||R(e))return;if(h(t,"Codes")||h(t,"Extractions")){new E.Notice("You must be in a Data File to make an extraction.",3e3);return}let o=t.vault.getFolderByPath(f);if(o||(o=await t.vault.createFolder(f)),!o){new E.Notice("ERROR: Could not create Extraction Folder.",4e3);return}let n=o.children.filter(r=>r instanceof E.TFolder),i=e.editorComponent.view.file;n.length===0?ie(t):n.length===1&&n[0]?Se(e,i,n[0]):new ae(t,e,n,i).open()}var Oe=[{id:"extract-from-paragraph",name:"Extract from paragraph",func:ke,hotkeyLetter:"e",ribbonIcon:"plus-square"},{id:"create-new-extraction-type",name:"Create new extraction type",func:Ie,ribbonIcon:"box-select"},{id:"aggregate-extractions",name:"Aggregate extractions",func:be,ribbonIcon:"sigma-square"},{id:"export-all-extractions-as-csv",name:"Export all extractions as .csv",func:Re,ribbonIcon:"arrow-up-square"}];function q(t,e){let o=t.workspace.getActiveFile();if(!o){e.setText("");return}let n=[],i=t.metadataCache.resolvedLinks[o.path]||{};if(h(t,"Codes")){let a=0;for(let[l,d]of Object.entries(i))a+=d;n.push(`Code ${a}x assigned`)}else if(h(t,"Extractions")){let l=o.parent.children.length-1;n.push(`${l}x extracted`)}else{let a=0,l=0;for(let[d,p]of Object.entries(i))d.startsWith(u+"/")&&(a+=p),d.startsWith(f+"/")&&l++;a>0&&n.push(`${a} Codes`),l>0&&n.push(`${l} Extractions`)}let r=t.metadataCache.unresolvedLinks[o.path]||{},s=0;for(let[a,l]of Object.entries(r))s+=l;s>0&&n.push(`${s} invalid links`);let c=n.map(a=>a.replace(/^(1 .*)s$/,"$1")).join(", ");e.setText(c)}var H=class extends De.Plugin{constructor(){super(...arguments);this.statusbar=this.addStatusBarItem()}onload(){console.info(this.manifest.name+" Plugin loaded.");for(let o of[...ye,...Oe]){this.addRibbonIcon(o.ribbonIcon,`Quadro: ${o.name}`,()=>o.func(this.app));let n={id:o.id,name:o.name,editorCallback:()=>o.func(this.app)};o.hotkeyLetter&&(n.hotkeys=[{modifiers:["Mod","Shift"],key:o.hotkeyLetter}]),this.addCommand(n)}q(this.app,this.statusbar),this.registerEvent(this.app.workspace.on("file-open",()=>q(this.app,this.statusbar))),this.registerEvent(this.app.metadataCache.on("resolved",()=>q(this.app,this.statusbar))),this.registerEvent(this.app.vault.on("delete",o=>Te(this.app,o)))}onunload(){console.info(this.manifest.name+" Plugin unloaded.")}};
