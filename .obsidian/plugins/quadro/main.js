/* THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
If you want to view the source, please visit the GitHub repository of this plugin. */

"use strict";var De=Object.defineProperty;var At=Object.getOwnPropertyDescriptor;var $t=Object.getOwnPropertyNames;var Mt=Object.prototype.hasOwnProperty;var Lt=(o,e)=>{for(var t in e)De(o,t,{get:e[t],enumerable:!0})},Nt=(o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of $t(e))!Mt.call(o,i)&&i!==t&&De(o,i,{get:()=>e[i],enumerable:!(n=At(e,i))||n.enumerable});return o};var Qt=o=>Nt(De({},"__esModule",{value:!0}),o);var Ht={};Lt(Ht,{default:()=>Ie});module.exports=Qt(Ht);var Dt=require("obsidian");var _e=require("obsidian");var Q={extractionOverview:"quadro-extractiontype-overview",codeOverview:"quadro-code-overview"},H="pre-merge-backups",oe="read";async function qe(o){let e=o.app,t=o.app.workspace.getActiveFile()?.path||"",n=e.vault.getMarkdownFiles().filter(s=>{let a=s.path!==t,l=e.metadataCache.getFileCache(s)?.frontmatter?.[oe]===!1;return a&&l});if(n.length===0){new _e.Notice(`No notes in with "${oe}: false" found.`);return}let i=Math.floor(Math.random()*n.length),r=n[i];await e.workspace.getLeaf().openFile(r)}var L=require("obsidian");var M=require("obsidian");var le={state:{source:!1,mode:"source"}},z=/\[\[(.+?)([|#].*?)?\]\]/;function h(o,e){let{app:t,settings:n}=o;return e||(e=t.workspace.getActiveFile()),typeof e=="string"&&(e=t.vault.getFileByPath(e)),!e||!(e instanceof M.TFile)||e.extension!=="md"?"Not Markdown":e.name==="Template.md"?"Template":e.path.includes(H)?"Backup":e.path.startsWith(n.coding.folder+"/")?"Code File":e.path.startsWith(n.extraction.folder+"/")?"Extraction File":"Data File"}async function de(o,e,t){let{app:n,settings:i}=o,r=i.analysis.folder;n.vault.getFolderByPath(r)||n.vault.createFolder(r);let a=(0,M.normalizePath)(r+`/${e}.md`),c=n.vault.getFileByPath(a);c?await n.vault.modify(c,t.join(`
`)):c=await n.vault.create(a,t.join(`
`)),await n.workspace.getLeaf().openFile(c,le),P(n)?.setCursor({line:0,ch:0}),n.commands.executeCommandById("file-explorer:reveal-active-file")}function P(o){let e=o.workspace.activeEditor?.editor;return e||new M.Notice("No active editor."),e}function K(o){if(o.getLine(o.getCursor().line).trim()===""&&!o.somethingSelected())return new M.Notice(`Current line is empty. 

Move cursor to a paragraph and try again.`,4e3),!0;let t=o.getCursor("head").line!==o.getCursor("anchor").line,n=o.listSelections().length>1;return t||n?(new M.Notice(`Paragraph ambiguous since multiple lines are selected.

Unselect, move your cursor to the paragraph you want to affect, and use the command again.`,5e3),!0):!1}function U(o){let e=o.getSelection().includes("==");return e&&new M.Notice(`Selection contains highlights.
Overlapping highlights are not supported.`,4e3),e}function pe(o){let e=o.workspace.getActiveFile();if(!e)return!1;let t=e.basename.match(/[|^#]/)?.[0];if(!t)return!1;let n=`The current file contains an invalid character: ${t}

Rename the file and try again.`;return new M.Notice(n,0),!0}function me(o){o.metadataTypeManager.setType("extraction-date","datetime"),o.metadataTypeManager.setType("merge-date","datetime"),o.metadataTypeManager.setType("extraction-source","multitext"),o.metadataTypeManager.setType("code description","text")}function ze(o){let e=o.settings.analysis.folder;return(0,L.normalizePath)(e+"/"+"progress.json")}function Ue(o){o.app.showInFolder(ze(o))}function Ge(o){let e=o.app,t=e.workspace.getActiveFile();if(!(h(o,t)==="Data File"&&t instanceof L.TFile)){new L.Notice("Current file is not a Data File.",4e3);return}if(e.metadataCache.getFileCache(t)?.frontmatter?.[oe]){new L.Notice("Data File already marked as read.",4e3);return}e.fileManager.processFrontMatter(t,r=>{r.read=!0}),T(o,"Data File","read"),new L.Notice("Marked current Data File as read.")}async function T(o,e,t){let{app:n}=o,i=(0,L.moment)().format("YYYY-MM-DD"),r=ze(o),a=await n.vault.adapter.exists(r)?JSON.parse(await n.vault.adapter.read(r)):{};a[i]||(a[i]={}),a[i][e]||(a[i][e]={}),a[i][e][t]||(a[i][e][t]=0),a[i][e][t]++,n.vault.adapter.write(r,JSON.stringify(a,null,2))}var Xe=[{id:"open-random-unread-datafile",name:"Open random unread Data File",func:qe,hotkeyLetter:"n",icon:"shuffle"},{id:"show-progress",name:"Show data analysis progress file",func:Ue,icon:"flag-triangle-right"},{id:"mark-datafile-as-read",name:"Mark current Data File as read",func:Ge,hotkeyLetter:"r",icon:"file-check"}];var ue={"last used first":(o,e)=>e.stat.mtime-o.stat.mtime,"oldest used first":(o,e)=>o.stat.mtime-e.stat.mtime,"frequently used first":(o,e)=>e.stat.size-o.stat.size,"rarely used first":(o,e)=>o.stat.size-e.stat.size,random:()=>Math.random()-.5,alphabetical:(o,e)=>o.basename.localeCompare(e.basename)},Je={",":"Comma (,)",";":"Semicolon (;)","	":"Tab"},Ze={"right-split":"to the right","down-split":"to the bottom",tab:"in new tab"},N={coding:{folder:"Codes",displayCount:!0,sortFunc:"last used first"},extraction:{folder:"Extractions",displayCount:!0,openingMode:"tab",csvSeparator:",",ignorePropertyOnMerge:[],displayProperty:[]},analysis:{folder:"Analysis"},suppressSuggestionInFields:[],propertiesKeysWidthPercent:35,statusbar:{shortened:!1}};function ne(o,e){return e.path.slice(o.settings.coding.folder.length+1,-3)}function ie(o,e){let t=o.app.metadataCache.resolvedLinks[e.path]||{},n=0;for(let[i,r]of Object.entries(t))h(o,i)==="Data File"&&(n+=r);return n}function fe(o,e,t){let n=o.app;return(t.match(new RegExp(z,"g"))||[]).reduce((s,a)=>{let[c,l]=a.match(z)||[];if(!l)return s;let p=n.metadataCache.getFirstLinkpathDest(l,e.path);return p&&h(o,p)==="Code File"&&s.push({tFile:p,wikilink:a}),s},[])}function he(o){let e=o.app.vault.getMarkdownFiles().filter(n=>h(o,n)==="Code File"),t=ue[o.settings.coding.sortFunc];return e.sort(t),e}function G(o,e){let t=ne(o,e);if(!o.settings.coding.displayCount)return t;let i=ie(o,e);return`${t} (${i}x)`}var R=require("obsidian");var ge=require("obsidian"),D=class extends ge.FuzzySuggestModal{hotkeyInstructions=[{command:"\u2191 \u2193",purpose:"Navigate"},{command:"\u21B9 ",purpose:"Down"},{command:"shift \u21B9 ",purpose:"Up"},{command:"\u23CE",purpose:"Select"},{command:"esc",purpose:"Dismiss"}];plugin;settings;constructor(e){super(e.app),this.plugin=e,this.settings=e.settings,this.modalEl.addClass(e.cssclass),this.setInstructions(this.hotkeyInstructions),this.scope.register([],"Tab",()=>{document.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowDown"}))}),this.scope.register(["Shift"],"Tab",()=>{document.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowUp"}))})}},Y=class extends ge.Modal{plugin;confirmationButton;constructor(e){super(e.app),this.plugin=e,this.modalEl.addClass(e.cssclass)}onClose(){this.contentEl.empty()}};async function re(o,e){let{app:t,settings:n}=o,i=n.extraction.openingMode,r=t.workspace.getLeaf();if(i==="tab"){let s=r.parent;await t.workspace.createLeafInParent(s,s.children.length).openFile(e,le)}else{let s=i==="right-split"?"right":"bottom",a=i==="right-split"?"vertical":"horizontal",c=t.workspace.getAdjacentLeafInDirection(r,s)||t.workspace.createLeafBySplit(r,a,!1);await c.openFile(e,le),c.parent.setDimension(2)}}function Fe(o,e){o.vault.setConfig("propertiesInDocument","visible"),setTimeout(()=>{let t=o.workspace.getActiveViewOfType(R.MarkdownView)?.metadataEditor.rendered[0];if(!t)return;t[e==="key"?"focusKey":"focusValue"]()},350)}var X=class extends D{extractionTypes;callback;constructor(e,t){super(e),this.extractionTypes=se(e),this.callback=t,this.setPlaceholder("Select extraction type")}getItems(){return this.extractionTypes.sort((e,t)=>{let n=$(this.plugin,e).length;return $(this.plugin,t).length-n})}getItemText(e){if(!this.plugin.settings.extraction.displayCount)return e.name;let n=$(this.plugin,e).length;return`${e.name} (${n}x)`}onChooseItem(e){this.callback(e)}};function ye(o,e){let{app:t,settings:n}=o,i=t.metadataCache.getFileCache(e)?.frontmatter,r=n.extraction.displayProperty;if(!i||r.length===0)return e.basename;let s=i?.["extraction-source"]?.length||0,a=s>1?`${s}x`:"",c=r.find(d=>{let u=i[d];return Array.isArray(u)?u.length>0:u||u===0});if(!c)return e.basename;let l=i[c];Array.isArray(l)&&(l=l.join(", "));let p=l?`${c}: ${l}`:"";return[e.basename,a,p].filter(Boolean).join("  \u2B29  ")}function Ce(o,e){let t=o.vault.getFileByPath(`${e.path}/Template.md`);if(!t){new R.Notice(`ERROR: Could not find "Template.md" for Extraction Type "${e.name}".`,0);return}let n=o.metadataCache.getFileCache(t)?.frontmatter;if(!n){new R.Notice(`ERROR: Properties of "Template.md" for Extraction Type "${e.name}" are invalid.`,0);return}return n}function se(o){let{app:e,settings:t}=o,n=e.vault.getFolderByPath(t.extraction.folder);if(!n){new R.Notice("ERROR: Could not find Extraction Folder.",0);return}let i=n.children.filter(r=>r instanceof R.TFolder&&r.children.find(s=>s.name==="Template.md"));if(i.length===0){let r=["ERROR: Could not find any valid Extraction Types.",'Check that the extraction folder has subfolders, and that the subfolder has a "Template.md" file.','You can also create a new extraction type with the command "Create new extraction type" or by pressing the button with the dashed box in the left sidebar.'].join(`

`);new R.Notice(r,0);return}return i}function $(o,e){return e.children.filter(n=>h(o,n)==="Extraction File")}function J(o){let{app:e,statusbar:t,settings:n}=o,i=n.statusbar.shortened,r=[],s=h(o),a=e.workspace.getActiveFile();if(!a||!["Data File","Code File","Extraction File"].includes(s)){t.setText(""),t.style.cssText="display: none";return}if(s==="Code File"){let d=ie(o,a),u=i?`${d}C`:`Code ${d}x assigned`;r.push(u)}else if(s==="Extraction File"){let m=a.parent;if(m){let d=$(o,m).length,u=i?`${d}E`:`${d}x extracted`;r.push(u)}}else if(s==="Data File"){let m=e.metadataCache.resolvedLinks[a.path]||{},d=0,u=0;for(let[g,v]of Object.entries(m))g.startsWith(n.coding.folder+"/")&&(d+=v),g.startsWith(n.extraction.folder+"/")&&u++;d>0&&r.push(`${d}${i?"C":" Codes"}`),u>0&&r.push(`${u}${i?"E":" Extractions"}`)}let c=e.metadataCache.unresolvedLinks[a.path]||{},l=0;for(let[m,d]of Object.entries(c))l+=d;if(l>0&&r.push(`${l} invalid links`),r.length===0){t.setText(""),t.style.cssText="display: none";return}let p=i?r.join(" "):r.map(m=>m.startsWith("1 ")?m.slice(0,-1):m).join(", ");t.setText(p),t.style.cssText="display: block"}var B=require("obsidian");async function et(o){let e=["*This file updates automatically, any manual changes to it will be lost.*","","```"+Q.codeOverview,"```",""];await de(o,"Code Overview",e)}function tt(o,e){let{app:t,settings:n}=o,i=[...e.children];i.sort((s,a)=>s instanceof B.TFolder&&a instanceof B.TFile?-1:s instanceof B.TFile&&a instanceof B.TFolder?1:s.name.localeCompare(a.name));let r="";for(let s of i)if(s instanceof B.TFolder){let a=s;if(!a.children.some(p=>p instanceof B.TFile&&p.extension==="md"))continue;let l=tt(o,a);r+=`<li>\u{1F4C1} ${a.name} ${l}</li>`}else if(s instanceof B.TFile){let a=s,c=a.path===n.coding.folder+"/Template.md",l=a.extension!=="md";if(c||l)continue;let p=t.metadataCache.getFileCache(a)?.frontmatter?.["code description"],m=p?": "+p:"",d=`<a href="${a.path}" class="internal-link">${a.basename}</a>`,u=ie(o,a);r+=`<li>\u{1F4C4} ${d} (${u}x)${m}</li>`}return`<ul>${r}</ul>`}function ot(o){let{app:e,settings:t}=o,n=e.vault.getFolderByPath(t.coding.folder);return n?tt(o,n):`\u26A0\uFE0F Code folder "${t.coding.folder}" not found.`}var Me=require("obsidian");var nt=require("obsidian"),Oe=/\^[\w-]+$/;function Rt(o){let[e]=o.match(Oe)||[];if(e){let n=o.slice(0,-e.length).trim();return{blockId:e,lineWithoutId:n}}return{blockId:"^id-"+(0,nt.moment)().format("YYMMDD-HHmmss"),lineWithoutId:o.trim()}}function Z(o){let e=o.getCursor(),t=o.getLine(e.line),n=o.getSelection();if(n){let s=n.replace(/^( ?)(.+?)( ?)$/g,"$1==$2==$3");o.replaceSelection(s),t=o.getLine(e.line)}let{blockId:i,lineWithoutId:r}=Rt(t);return{blockId:i,lineWithoutId:r}}function ee(o,e,t,n,i){let r=o.editorComponent.view.file;if(!r)return;let s=o.editorComponent.app;s.vault.setConfig("useMarkdownLinks",!1);let a=s.fileManager.generateMarkdownLink(e,r.path,"",t),c=`${n} ${a} ${i}`,l=o.getCursor();o.setLine(l.line,c),o.setCursor(l)}var I=require("obsidian");var xe=require("obsidian");var V=class extends xe.AbstractInputSuggest{textInputEl;plugin;foldersInVault;constructor(e,t){super(e.app,t),this.textInputEl=t,this.plugin=e,this.foldersInVault=e.app.vault.getAllLoadedFiles().filter(n=>n instanceof xe.TFolder)}getSuggestions(e){return this.foldersInVault.filter(t=>t.path.includes(e))}renderSuggestion(e,t){t.createEl("span",{text:e.path})}selectSuggestion(e){this.textInputEl.value=e.path,this.textInputEl.trigger("input"),this.close()}};function it(o,e){return e.path.slice(o.settings.coding.folder.length+1)+"/"}var we=class extends V{getSuggestions(e){if(!e.includes("/"))return[];let t=this.plugin.settings;return this.foldersInVault.filter(i=>{let r=i.path.includes(e),s=i.path.startsWith(t.coding.folder+"/"),a=!i.path.includes(H);return r&&s&&a})}renderSuggestion(e,t){let n=it(this.plugin,e);t.createEl("span",{text:n})}selectSuggestion(e){this.textInputEl.value=it(this.plugin,e),this.textInputEl.trigger("input"),this.close()}};var Ae=class extends Y{fullCode="";codeDesc="";onSubmit;constructor(e,t){super(e),this.onSubmit=t}onOpen(){let{contentEl:e}=this;e.addClass(this.plugin.cssclass);let t=i=>i!==""&&!i.startsWith("/")&&!i.endsWith("/"),n=()=>{this.close(),this.onSubmit(this.fullCode,this.codeDesc)};e.createEl("h4",{text:"New code creation"}),e.createEl("small",{text:'If there is a file "Template.md" at the root of the Codes Folder, the new Code File will be populated with its frontmatter.'}),e.createEl("br",{}),e.createEl("br",{}),new I.Setting(e).setName("Name of the code").setDesc('Use a slash ("/") in the name to create the Code File in a subfolder (group). Example: "groupname/codename".').addText(i=>{new we(this.plugin,i.inputEl),i.onChange(r=>{this.fullCode=r.trim(),this.confirmationButton?.setDisabled(!t(this.fullCode))}).inputEl.addClass("quadro-wide-input"),i.inputEl.addEventListener("keydown",r=>{r.key==="Enter"&&t(this.fullCode)&&(r.preventDefault(),n())})}),new I.Setting(e).setName("Code description").setDesc('Will be added as metadata with the key "code description".').addText(i=>{i.onChange(r=>{this.codeDesc=r.trim()}).inputEl.addClass("quadro-wide-input"),i.inputEl.addEventListener("keydown",r=>{r.key==="Enter"&&t(this.fullCode)&&(r.preventDefault(),n())})}),new I.Setting(e).addButton(i=>{this.confirmationButton=i.setButtonText("Create").setCta().setDisabled(!0).onClick(n)}).addButton(i=>i.setButtonText("Cancel").onClick(()=>this.close()))}},$e=class extends Y{input="";onSubmit;constructor(e,t){super(e),this.onSubmit=t}onOpen(){let{contentEl:e}=this;e.addClass(this.plugin.cssclass),e.createEl("h4",{text:"Bulk-create new codes"}),e.createEl("p",{text:"Every line will result in a new code file."}),e.createEl("p",{text:'Use a slash ("/") in the name to create the Code File in a subfolder (group).'}),e.createEl("p",{text:'If there is a file "Template.md" at the root of the Codes Folder, the new Code Files will be populated with its frontmatter.'}),new I.Setting(e).addTextArea(t=>{t.onChange(n=>{this.input=n.trim(),this.confirmationButton?.setDisabled(this.input==="")}).inputEl.addClass("quadro-large-textarea")}).infoEl.remove(),new I.Setting(e).addButton(t=>{this.confirmationButton=t.setButtonText("Create").setCta().setDisabled(!0).onClick(()=>{this.close(),this.onSubmit(this.input)})}).addButton(t=>t.setButtonText("Cancel").onClick(()=>this.close()))}};async function rt(o,e,t){let{app:n,settings:i}=o;e=e.replace(/\.md$/,"").replace(/[:#^?!"*<>|[\]\\]/g,"-").replace(/^\.|\/\./g,"").replace(/^\/+|\/+$/g,"");let r=(0,I.normalizePath)(`${i.coding.folder}/${e}.md`);if(n.vault.getFileByPath(r))return new I.Notice(`Code "${e}" already exists, Code File not created.`,0),!1;let a=e.split("/"),c=a.pop(),l=a.length>0?"/"+a.join("/"):"",p=i.coding.folder+l;n.vault.getFolderByPath(p)||await n.vault.createFolder(p);let d=`code description: "${t.replaceAll('"',"'")}"`,u=n.vault.getFileByPath(i.coding.folder+"/Template.md"),g=[];if(u){let w=/^code description: (.*)$/m,S=await n.vault.read(u),{exists:f,frontmatter:F}=(0,I.getFrontMatterInfo)(S);f&&(F=F.match(w)?F.replace(w,d):d+`
`+F,g.push(...F.trim().split(`
`)))}else g.push(d);let v=["---",...g,"---","",""],C=await n.vault.create(`${p}/${c}.md`,v.join(`
`));return C?(new I.Notice(`Created new code file: "${e}"`,3500),T(o,"Code File","new"),C):(new I.Notice("Failed to create new code file.",0),!1)}function st(o,e){new Ae(o,async(t,n)=>{let i=await rt(o,t,n);i&&e(i)}).open()}function at(o){new $e(o,async e=>{let t=0,n=[];for(let r of e.split(`
`))await rt(o,r,"")?t++:n.push(r);let i=`${t} file(s) created`;n.length>0&&(i+=`
Could not create: `+n.join(", ")),new I.Notice(i,n.length>0?0:3e3)}).open()}var Le=class extends D{editor;codesInPara;dataFile;constructor(e,t,n,i){super(e),this.editor=t,this.codesInPara=n,this.dataFile=i,this.setPlaceholder("Select code to assign"),this.setInstructions([...this.hotkeyInstructions,{command:"shift \u23CE",purpose:"Create new code"}]),this.scope.register(["Shift"],"Enter",r=>{r.isComposing||(r.preventDefault(),this.close(),this.onChooseItem("new-code-file"))})}getItems(){return[...he(this.plugin).filter(n=>!this.codesInPara.find(i=>i.path===n.path)),"new-code-file"]}getItemText(e){return e==="new-code-file"?"\u2B51 Create new code":G(this.plugin,e)}onChooseItem(e){e==="new-code-file"?st(this.plugin,t=>this.assignCode(t,this.dataFile)):this.assignCode(e,this.dataFile)}async assignCode(e,t){let n=this.editor,i=ne(this.plugin,e),{blockId:r,lineWithoutId:s}=Z(n);ee(n,e,i,s,r);let a=`![[${t.path.slice(0,-3)}#${r}]]
`;await this.app.vault.append(e,a),T(this.plugin,"Code File","assign")}};function ct(o){let{app:e}=o,t=P(e);if(!t||K(t))return;if(h(o)!=="Data File"){new Me.Notice("You must be in a Data File to assign a code.",4e3);return}if(U(t)||pe(e))return;let n=t.editorComponent.view.file;if(!n){new Me.Notice("No file open.",4e3);return}let i=t.getLine(t.getCursor().line),r=fe(o,n,i).map(s=>s.tFile);new Le(o,t,r,n).open()}var Ne=require("obsidian");async function lt(o){let e=o.app,t=P(e);if(!t)return;if(h(o)!=="Code File"){new Ne.Notice("Must be in a Code File to delete the code everywhere.",4e3);return}let n=t.editorComponent.view.file;if(!n){new Ne.Notice("No file open.",4e3);return}await e.vault.trash(n,!0)}var Te=require("obsidian");var O=require("obsidian");function Bt(o){o.workspace.activeEditor?.editor?.editorComponent?.view?.currentMode?.cleanupLivePreview?.()}async function ve(o,e,t,n,i){let{app:r,settings:s}=o;n=(0,O.normalizePath)(n+"/"+H),r.vault.getFolderByPath(n)||await r.vault.createFolder(n);let a=(0,O.moment)().format("YY-MM-DD_HH-mm-ss");await r.vault.copy(e,`${n}/${e.basename} ${a}.md`),await r.vault.copy(t,`${n}/${t.basename} ${a}.md`);let c=[...s.extraction.ignorePropertyOnMerge,"extraction-date","merge-date"],l=r.metadataCache.getFileCache(t)?.frontmatter||{},p={};await r.fileManager.processFrontMatter(e,f=>{for(let F in l){let y=f[F],b=l[F],A=!y&&y!==0&&y!==!1,E=!b&&b!==0&&b!==!1;if(!(c.includes(F)||y===b||E)){if(A){f[F]=b;continue}if(Array.isArray(y)&&Array.isArray(b)){f[F]=[...new Set([...y,...b])];continue}f[F]=y,p[F]=b}}f["merge-date"]=(0,O.moment)().format("YYYY-MM-DDTHH:mm")});let m=await r.vault.cachedRead(t);await r.vault.process(e,f=>{let F=f.slice((0,O.getFrontMatterInfo)(f).contentStart),y=m.slice((0,O.getFrontMatterInfo)(m).contentStart),b="";Object.keys(p).length>0&&(b=`
`+["#### Properties that could be not be automatically merged",...(0,O.stringifyYaml)(p).trim().split(`
`).map(Ot=>"- "+Ot),"","---"].join(`
`)+`

`);let E=(F+`
`+y).replaceAll(`**Paragraph extracted from:**
`,"").replace(/\n{2,}/g,`
`);return f.slice(0,(0,O.getFrontMatterInfo)(f).contentStart)+b+E}),Bt(r),P(r)?.setCursor({line:0,ch:0});let d=[];for(let[f,F]of Object.entries(r.metadataCache.resolvedLinks))Object.keys(F).includes(t.path)&&d.push(f);let u=[...new Set(d)],g=0,v=0;for(let f of u){let F=r.vault.getFileByPath(f);F&&(await r.vault.process(F,y=>{let b=r.metadataCache.getFileCache(F)?.links||[],A=[];for(let E of b){if(E.link!==t.basename&&E.link!==t.path)continue;let{start:k,end:te}=E.position;A.push([k.offset,te.offset])}A.sort((E,k)=>k[0]-E[0]);for(let[E,k]of A){let te=i==="Code File"?"|"+ne(o,e):"",Ve=`[[${e.basename}${te}]]`;y=y.slice(0,E)+Ve+y.slice(k),v++}return y}),g++)}r.vault.delete(t);let C=v===1?"":"s",w=g===1?"":"s",S=[`"${t.basename}" merged into "${e.basename}".`,`${v} reference${C} in ${g} file${w} updated.`,`A backup of the original files has been saved in the subfolder "${H}."`].join(`

`);new O.Notice(S,1e4)}var Qe=class extends D{mergeKeepFile;constructor(e,t){super(e),this.setPlaceholder(`Select Code File to merge into "${t.basename}":`),this.mergeKeepFile=t}getItems(){let e=he(this.plugin).filter(t=>t.path!==this.mergeKeepFile.path);return e.length===0&&(new Te.Notice("No other codes have been created yet.",4e3),this.close()),e}getItemText(e){return G(this.plugin,e)}async onChooseItem(e){let{plugin:t,mergeKeepFile:n}=this,i=t.settings.coding.folder;await ve(t,n,e,i,"Code File"),T(t,"Code File","merge")}};function dt(o){let e=P(o.app);if(!e)return;if(h(o)!=="Code File"){new Te.Notice("You must be in a Code File for this.",3500);return}let t=e.editorComponent.view.file;if(!t){new Te.Notice("No file open.",4e3);return}new Qe(o,t).open()}var pt=require("obsidian");function mt(o){h(o)==="Code File"?(o.app.commands.executeCommandById("workspace:edit-file-title"),T(o,"Code File","rename")):new pt.Notice("You must be in a Code File.",4e3)}var _=require("obsidian");var Re=class extends D{codesInParagraph;dataFile;editor;constructor(e,t,n,i){super(e),this.codesInParagraph=i,this.dataFile=n,this.editor=t,this.plugin=e,this.setPlaceholder("Select code to remove from paragraph")}getItems(){return this.codesInParagraph}getItemText(e){return G(this.plugin,e.tFile)}onChooseItem(e){ut(this.plugin,this.editor,this.dataFile,e)}};async function ut(o,e,t,n){let i=o.app,r=e.getCursor().line,s=e.getLine(r),a=s.replace(n.wikilink,"");e.setLine(r,a);let[c]=s.match(Oe)||[];if(!c){new _.Notice(`No ID found in current line.
Reference in Code File thus not deleted.`,0);return}i.vault.process(n.tFile,l=>{let p=l.split(`
`),m=p.findIndex(d=>{if(!d.includes(c))return!1;let u=d.match(new RegExp(z,"g"))||[];for(let g of u){let[v,C]=g.match(z)||[];if(!C)continue;if(i.metadataCache.getFirstLinkpathDest(C,n.tFile.path)?.path===t.path)return!0}return!1});if(m<0){let d=`"Code File "${n.tFile.basename}" contains no reference to Data File "${t.basename}" with the ID "${c}". Reference in Code File is thus not deleted.`;return new _.Notice(d,0),l}return p.splice(m,1),l=p.join(`
`),new _.Notice(`Assignment of code "${n.tFile.basename}" removed.`,3500),T(o,"Code File","unassign"),l})}function ft(o){let e=o.app,t=P(e);if(!t||K(t))return;if(h(o)!=="Data File"){new _.Notice("You must be in a Data File to unassign a code.",4e3);return}let n=t.editorComponent.view.file;if(!n){new _.Notice("No file open.",4e3);return}let i=t.getLine(t.getCursor().line),r=fe(o,n,i);r.length===0?new _.Notice("Line does not contain any codes to remove.",3500):r.length===1?ut(o,t,n,r[0]):new Re(o,t,n,r).open()}var ht=[{id:"assign-code",name:"Assign code to paragraph",func:ct,hotkeyLetter:"a",icon:"circle-plus"},{id:"rename-code",name:"Rename code",func:mt,icon:"circle-slash"},{id:"unassign-code",name:"Remove code from paragraph",func:ft,hotkeyLetter:"d",icon:"circle-minus"},{id:"delete-code-everywhere",name:"Delete Code File and all references to it",func:lt,icon:"circle-x"},{id:"merge-codes",name:"Merge another Code File into current Code File",func:dt,icon:"circle-dot"},{id:"bulk-create-new-code-files",name:"Bulk create new Code Files",func:at,icon:"circle-dashed"},{id:"code-overview-codeblock",name:"Show code overview",func:et,icon:"circle-equal"}];var ae=require("obsidian");var Be=class extends D{editor;constructor(e,t){super(e),this.setPlaceholder("Add paragraph to following Extraction File:"),this.editor=t}getItems(){let{app:e,plugin:t}=this,n=e.vault.getMarkdownFiles().filter(i=>h(t,i)==="Extraction File").sort((i,r)=>r.stat.mtime-i.stat.mtime);return n.length===0&&(new ae.Notice("No extractions have been created yet.",3e3),this.close()),n}getItemText(e){return ye(this.plugin,e)}async onChooseItem(e){let{app:t,editor:n}=this,i=n.editorComponent.view.file;if(!i){new ae.Notice("No file open.",4e3);return}let{blockId:r,lineWithoutId:s}=Z(n);if(n.getLine(n.getCursor().line).includes(`[[${e.basename}]]`)){new ae.Notice(`The paragraph already references "${e.basename}". Aborting.`,0);return}let c=`${i.path.slice(0,-3)}#${r}`,l=`[[${c}]]`;t.fileManager.processFrontMatter(e,p=>{let m=p["extraction-source"];p["extraction-source"]=m?[...m,l]:[l]}),await t.vault.append(e,`![[${c}]]
`),ee(n,e,e.basename,s,r),T(this.plugin,"Extraction File","added paragraph")}};function gt(o){let e=P(o.app);if(!(!e||K(e)||U(e))){if(h(o)!=="Data File"){new ae.Notice("You must be in a Data File to make an extraction.",4e3);return}new Be(o,e).open()}}var q=require("obsidian");var We=class extends Y{onSubmit;nameOfNewType="";constructor(e,t){super(e),this.onSubmit=t}onOpen(){let{contentEl:e}=this;e.createEl("h4",{text:"New Extraction Type"}),e.addClass(this.plugin.cssclass);let t=i=>i!=="",n=()=>{this.close(),this.onSubmit(this.nameOfNewType)};new q.Setting(e).setName("Name of the new type").addText(i=>{i.onChange(r=>{this.nameOfNewType=r.trim(),this.confirmationButton?.setDisabled(!t(r))}).inputEl.addClass("quadro-wide-input"),i.inputEl.addEventListener("keydown",r=>{r.key==="Enter"&&t(this.nameOfNewType)&&(r.preventDefault(),n())})}),new q.Setting(e).addButton(i=>{this.confirmationButton=i.setButtonText("Create").setCta().setDisabled(!0).onClick(n)}).addButton(i=>i.setButtonText("Cancel").onClick(()=>this.close()))}};function Ft(o){let{app:e,settings:t}=o;new We(o,async n=>{n=n.replace(/\.md$/,"").replaceAll("/","_").replace(/[:#^?!"*<>|[\]\\]/g,"-").replace(/^\./,"");let i=(0,q.normalizePath)(t.extraction.folder+"/"+n);await e.vault.createFolder(i),new q.Notice(`Creating New Template for Extraction Type "${n}"`,6e3);let s=await e.vault.create(i+"/Template.md",`---
dimension: 
---

`);await re(o,s),e.commands.executeCommandById("file-explorer:reveal-active-file"),Fe(e,"key")}).open()}var Ct=require("obsidian"),W=require("obsidian");var Wt="-";function yt(o,e){return o.map(n=>`"${n.replaceAll('"','""')}"`).join(e)}async function wt(o){let{app:e,settings:t}=o,n=t.extraction.csvSeparator,i=se(o);if(!i)return;let r;for(let s of i){let a=[],c=Ce(e,s);if(!c){let f=`Export of Extraction Type "${s.name}" is skipped, as the Templade.md has no valid properties.`;new W.Notice(f,0);continue}let l=["File",...Object.keys(c),"extraction-date","extraction-source"],p=yt(l,n);a.push(p);let m=s.children.filter(f=>f instanceof W.TFile&&f.name!=="Template.md");for(let f of m){let F=e.metadataCache.getFileCache(f)?.frontmatter;if(!F)continue;let y=[];for(let A of l){if(A==="File"){y.push(f.basename);continue}let E=F[A]??Wt,k;Array.isArray(E)?k=E.join("; "):typeof E=="object"?k=JSON.stringify(E):k=E.toString(),A==="extraction-source"&&(k=k.replace(/\[\[|\]\]/g,"")),y.push(k)}let b=yt(y,n);a.push(b)}let d=(0,W.normalizePath)(t.analysis.folder+"/CSV Export");e.vault.getFolderByPath(d)||await e.vault.createFolder(d);let g=a.join(`
`),v=(0,Ct.moment)().format("YYYY-MM-DD_HH-mm-ss"),C=(0,W.normalizePath)(`${d}/${s.name}_${v}.csv`),w=await e.vault.create(C,g),S=w?`Successfully exported "${s.name}".`:`ERROR: Export for "${s.name}" failed.`;new W.Notice(S,w?5e3:0),!r&&w&&(r=w)}new W.Notice("All CSV exports finished.",3500),r&&e.showInFolder(r.path)}var j=require("obsidian");async function xt(o,e,t){let n=o.app;me(n);let i=t.name,r=t.path,s=e.editorComponent.view.file;if(!s){new j.Notice("No file open.",4e3);return}let a=n.vault.getFileByPath(`${r}/Template.md`);if(!a){new j.Notice(`ERROR: Could not find "Template.md" for Extraction Type "${i}".`,0);return}let c=await n.vault.cachedRead(a),{exists:l,frontmatter:p}=(0,j.getFrontMatterInfo)(c);if(!l){new j.Notice(`The file "Template.md" in the folder "${r}" does not contain valid metadata fields.

You need to add valid fields before you can make extractions.`,0),re(o,a);return}let m,d=$(o,t).length;for(;;){d++;let F=d.toString().padStart(3,"0");if(m=`${r}/${i} ${F}.md`,!n.vault.getFileByPath(m))break}let{blockId:u,lineWithoutId:g}=Z(e),v=`${s.path.slice(0,-3)}#${u}`,C=(0,j.moment)().format("YYYY-MM-DDTHH:mm"),w=["---",...p.split(`
`),"extraction-date: "+C,"extraction-source:",`  - "[[${v}]]"`,"---","","**Paragraph extracted from:**",`![[${v}]]`].join(`
`),S=await n.vault.create(m,w),f=S.basename;ee(e,S,f,g,u),await re(o,S),Fe(n,"value"),T(o,"Extraction File","new")}function vt(o){let{app:e}=o,t=P(e);if(!t||K(t))return;if(h(o)!=="Data File"){new j.Notice("You must be in a Data File to make an extraction.",4e3);return}if(U(t)||pe(e))return;let n=se(o);n&&(n.length===1?xt(o,t,n[0]):new X(o,i=>{xt(o,t,i)}).open())}var Tt=require("obsidian");function Et(o){new X(o,async e=>{let t="Extraction Overview \u2013 "+e.name,n=["*This file updates automatically, any manual changes to it will be lost.*","","> [!INFO]","> You can use the codeblock property \"filter\" to only show specific values, Click the `</>` icon to edit the filter, for example: `filter: 'word'`, and move the cursor out of the codeblock. (Leave it empty to show all values.)","","```"+Q.extractionOverview,`extraction-type: "${e.name}"`,'filter: ""',"```",""];await de(o,t,n)}).open()}function bt(o,e){let t=o.app;t.internalPlugins.plugins["global-search"].enable();let n=(0,Tt.parseYaml)(e),i=n["extraction-type"],r=(n.filter||"").trim().toLowerCase(),s=o.settings.extraction.folder+"/"+i,a=n.ignore||[],c=t.vault.getFolderByPath(s);if(!c)return`\u26A0\uFE0F Extraction Type "${i}" invalid.`;let l=Ce(t,c);if(!l)return`\u26A0\uFE0F Invalid template or frontmatter for "${i}".`;let p=Object.keys(l),m=$(o,c),d=p.map(g=>{let v=t.metadataTypeManager.getPropertyInfo(g)?.type||"",C=t.metadataCache.getFrontmatterPropertyValuesForKey(g);if(C.length===0)return`<b>${g}</b> <small>not used yet</small><br>`;if(v.startsWith("date")||a.includes(g))return`<b>${g}</b> <small>(type "${v}")</small><br>`;let w=C.reduce((S,f)=>{if(r&&!f.toLowerCase().includes(r))return S;let y=0;for(let E of m){let k=t.metadataCache.getFileCache(E)?.frontmatter?.[g];(k===f||k?.includes(f))&&y++}if(y===0)return S;let b=f.replaceAll('"','\\"'),A=`obsidian://search?query=["${g}":"${b}"] path:"${c.path}"`;return S.push(`<li><a href='${A}'>${f}</a> (${y}x)</li>`),S},[]);return`<b>${g}</b> <small><ul>${w.join("")}</ul></small>`});return(r?`<hr><b>Filter:</b> <mark>${r}</mark><hr><br>`:"")+d.join("")}var Ee=require("obsidian");var je=class extends D{mergeKeepFile;constructor(e,t){super(e),this.setPlaceholder(`Select Extraction File to merge into "${t.basename}":`),this.mergeKeepFile=t}getItems(){let e=this.mergeKeepFile.parent,t=$(this.plugin,e).filter(n=>n.path!==this.mergeKeepFile.path).sort((n,i)=>i.stat.mtime-n.stat.mtime);return t.length===0&&(new Ee.Notice("No other extractions have been created yet.",4e3),this.close()),t}getItemText(e){return ye(this.plugin,e)}async onChooseItem(e){let{plugin:t,mergeKeepFile:n}=this,i=n.parent?.path||"";await ve(t,n,e,i,"Extraction File"),T(t,"Extraction File","merge")}};function kt(o){let e=P(o.app);if(!e)return;if(h(o)!=="Extraction File"){new Ee.Notice("You must be in an Extraction File for this.",4e3);return}let t=e.editorComponent.view.file;if(!t){new Ee.Notice("No file open.",4e3);return}new je(o,t).open()}var Pt=[{id:"extract-from-paragraph",name:"Extract from paragraph",func:vt,hotkeyLetter:"e",icon:"square-plus"},{id:"extract-existing-extraction-file",name:"Add paragraph as source to existing Extraction File",func:gt,hotkeyLetter:"l",icon:"square-asterisk"},{id:"merge-extractions",name:"Merge another Extraction File into current Extraction File",func:kt,icon:"square-dot"},{id:"create-new-extraction-type",name:"Create new Extraction Type",func:Ft,icon:"box-select"},{id:"export-all-extractions-as-csv",name:"Export all extractions as .csv",func:wt,icon:"square-arrow-up"},{id:"extractiontypes-overview",name:"Show extraction type overview",func:Et,icon:"square-equal"}];function ce(o){let e=o.settings.suppressSuggestionInFields.map(n=>`[data-property-key="${n}"]`).join(", "),t=e?`.app-container:has(.metadata-property:is(${e}) :is(.metadata-input-longtext, .multi-select-container):focus-within) ~ .suggestion-container{ display: none; }`:"";if(!o.styleElSuppressSuggestionsInFields){let n=activeDocument.createElement("style");n.addClass(o.cssclass),n.setAttribute("type","text/css"),activeDocument.head.appendChild(n),o.register(()=>n?.detach()),o.styleElSuppressSuggestionsInFields=n}o.styleElSuppressSuggestionsInFields.textContent=t,o.app.workspace.trigger("css-change")}function be(o){let t=`body .metadata-property-key { min-width: ${o.settings.propertiesKeysWidthPercent}% }`;if(!o.styleElPropertyKeyWidth){let n=activeDocument.createElement("style");n.addClass(o.cssclass),n.setAttribute("type","text/css"),activeDocument.head.appendChild(n),o.register(()=>n?.detach()),o.styleElPropertyKeyWidth=n}o.styleElPropertyKeyWidth.textContent=t,o.app.workspace.trigger("css-change")}function Ke(o){return!!(o&&typeof o=="object"&&!Array.isArray(o))}function ke(o,...e){if(e.length===0)return o;let t=e.shift();if(Ke(o)&&Ke(t))for(let n in t)Ke(t[n])?(o[n]||Object.assign(o,{[n]:{}}),ke(o[n],t[n])):Object.assign(o,{[n]:t[n]});return ke(o,...e)}var x=require("obsidian");function He(o){return(0,x.normalizePath)(o).replace(/:/g,"-")}function Ye(o){return o.split(`
`).map(e=>e.trim()).filter(e=>e!=="")}var Pe=class extends x.PluginSettingTab{plugin;constructor(e){super(e.app,e),this.plugin=e}display(){let{containerEl:e}=this,t=this.plugin.settings;e.empty(),e.addClass(this.plugin.cssclass),new x.Setting(e).setName("Properties without suggestions").setDesc("List of properties, one per line, for which suggestions should be surppressed. This is useful for dimensions which are intended for unique content that is not going to be repeated in other Code Files or Extraction Files.").addTextArea(n=>n.setPlaceholder("One property per line").setValue(t.suppressSuggestionInFields.join(`
`)).onChange(async i=>{t.suppressSuggestionInFields=Ye(i),await this.plugin.saveSettings(),ce(this.plugin)}).inputEl.addClass("quadro-settings-textarea")),new x.Setting(e).setName("Width of property keys").setDesc("Minimum width of keys in the list of properties, in percent.").addSlider(n=>n.setLimits(20,60,5).setDynamicTooltip().setValue(t.propertiesKeysWidthPercent).onChange(async i=>{t.propertiesKeysWidthPercent=i,await this.plugin.saveSettings(),be(this.plugin)})),new x.Setting(e).setName("Shortened statusbar text").setDesc('For example, instead of "Code 20x assigned" the statusbar will display "20C".').addToggle(n=>n.setValue(t.statusbar.shortened).onChange(async i=>{t.statusbar.shortened=i,J(this.plugin),await this.plugin.saveSettings()})),new x.Setting(e).setName("Coding").setHeading(),new x.Setting(e).setName("Code folder").setDesc("Location where the Code Files are stored.").addSearch(n=>{new V(this.plugin,n.inputEl),n.setPlaceholder(N.coding.folder).setValue(t.coding.folder).onChange(async i=>{t.coding.folder=He(i)||N.coding.folder,await this.plugin.saveSettings()}).inputEl.addClass("quadro-settings-input")}),new x.Setting(e).setName("Code count").setDesc("When selecting a code to assign, show a count of how often the code has already been assigned. (Note that this is a methodological decision, as it may influence your choice of codes.)").addToggle(n=>n.setValue(t.coding.displayCount).onChange(async i=>{t.coding.displayCount=i,await this.plugin.saveSettings()})),new x.Setting(e).setName("Sort order").setDesc("When selecting a code to assign, method by which the codes are ordered. (Note that this is a methodological decision, as it may influence your choice of codes.)").addDropdown(n=>{for(let i in ue)n.addOption(i,i);n.setValue(t.coding.sortFunc).onChange(async i=>{t.coding.sortFunc=i,await this.plugin.saveSettings()})}),new x.Setting(e).setName("Extraction").setHeading(),new x.Setting(e).setName("Extraction folder").setDesc("Location where the Extraction Files are stored.").addSearch(n=>{new V(this.plugin,n.inputEl),n.setPlaceholder(N.extraction.folder).setValue(t.extraction.folder).onChange(async i=>{t.extraction.folder=He(i)||N.extraction.folder,await this.plugin.saveSettings()}).inputEl.addClass("quadro-settings-input")}),new x.Setting(e).setName("Extraction count").setDesc("When selecting an extraction type, show a count of how often the type has been extracted.(Note that this is a methodological decision, as it may influence your choice of codes.)").addToggle(n=>n.setValue(t.extraction.displayCount).onChange(async i=>{t.extraction.displayCount=i,await this.plugin.saveSettings()})),new x.Setting(e).setName("Location of extraction window").setDesc("When creating a new extraction, a new split window opens. This setting determines where that window opens.").addDropdown(n=>{n.addOptions(Ze).setValue(t.extraction.openingMode).onChange(async i=>{t.extraction.openingMode=i,await this.plugin.saveSettings()})}),new x.Setting(e).setName("Ignore properties on merging").setDesc("List of properties, one per line, which should not trigger manual incongruence resolvement when merging Extraction Files. The properties are still added to the frontmatter, there merging just happens automatically without considering potential conflicts. This is intended for properties where it does not matter which value is chosen, such as IDs. ").addTextArea(n=>n.setPlaceholder("One property per line").setValue(t.extraction.ignorePropertyOnMerge.join(`
`)).onChange(async i=>{t.extraction.ignorePropertyOnMerge=Ye(i),await this.plugin.saveSettings(),ce(this.plugin)}).inputEl.addClass("quadro-settings-textarea")),new x.Setting(e).setName("Display property when merging").setDesc("Property which should be displayed when selecting an Extraction File, for instance when merging Extraction Files. If a list of properties is specified, the first one that exists in the Extraction File is used. For a list of properties, enter one property per line.").addTextArea(n=>n.setPlaceholder("One property per line, the first existing property is used.").setValue(t.extraction.displayProperty.join(`
`)).onChange(async i=>{t.extraction.displayProperty=Ye(i),await this.plugin.saveSettings()}).inputEl.addClass("quadro-settings-textarea")),new x.Setting(e).setName("CSV separator").setDesc("Separator used when exporting extractions as .csv files.").addDropdown(n=>{n.addOptions(Je).setValue(t.extraction.csvSeparator).onChange(async i=>{t.extraction.csvSeparator=i,await this.plugin.saveSettings()})}),new x.Setting(e).setName("Analysis").setHeading(),new x.Setting(e).setName("Analysis folder").setDesc("Location where overviews, progress, and exports are placed.").addSearch(n=>{new V(this.plugin,n.inputEl),n.setPlaceholder(N.analysis.folder).setValue(t.analysis.folder).onChange(async i=>{t.analysis.folder=He(i)||N.analysis.folder,await this.plugin.saveSettings()}).inputEl.addClass("quadro-settings-input")})}};function St(o,e){let t=Object.keys(e).map(n=>jt(o,n,e[n]));return t.length===1?t[0]:function(){t.forEach(n=>n())}}function jt(o,e,t){let n=o[e],i=o.hasOwnProperty(e),r=i?n:function(){return Object.getPrototypeOf(o)[e].apply(this,arguments)},s=t(r);return n&&Object.setPrototypeOf(s,n),Object.setPrototypeOf(a,s),o[e]=a,c;function a(...l){return s===r&&o[e]===a&&c(),s.apply(this,l)}function c(){o[e]===a&&(i?o[e]=r:delete o[e]),s!==r&&(s=r,Object.setPrototypeOf(a,n||Function))}}var Se=require("obsidian");function It(o){let e=o.app.vault;return St(e,{trash:n=>async(i,r)=>{let s=h(o,i);(s==="Code File"||s==="Extraction File")&&i instanceof Se.TFile?(await Kt(o,i),T(o,s,"delete")):s==="Data File"&&T(o,s,"delete"),await n.apply(e,[i,r])}})}async function Kt(o,e){let t=o.app,n=0,i=0,r=[];for(let[m,d]of Object.entries(t.metadataCache.resolvedLinks))Object.keys(d).includes(e.path)&&r.push(m);let s=[...new Set(r)];for(let m of s){let d=t.vault.getFileByPath(m);d&&(await t.vault.process(d,u=>{let g=t.metadataCache.getFileCache(d)?.links||[],v=[];for(let C of g){if(C.link!==e.basename&&C.link!==e.path)continue;let{start:w,end:S}=C.position;v.push([w.offset,S.offset])}v.sort((C,w)=>w[0]-C[0]);for(let[C,w]of v)u[w]===" "&&w++,u=u.slice(0,C)+u.slice(w),i++;return u}),n++)}let a=i===1?"":"s",c=n===1?"":"s",l=i===1?"has":"have",p=["Quadro",`"${e.basename}" was deleted.`,"",`${i} reference${a} in ${n} file${c} ${l} been removed.`].join(`
`);console.info(p),new Se.Notice(p,8e3)}var Ie=class extends Dt.Plugin{styleElSuppressSuggestionsInFields;styleElPropertyKeyWidth;cssclass=this.manifest.id;statusbar=this.addStatusBarItem();trashWatcherUninstaller;settings=N;async onload(){console.info(this.manifest.name+" Plugin loaded.");for(let e of[...ht,...Pt,...Xe]){this.addRibbonIcon(e.icon,`Quadro: ${e.name}`,()=>e.func(this)).addClasses([this.cssclass,"quadro-ribbon-button"]);let n={id:e.id,name:e.name,icon:e.icon,editorCallback:async()=>e.func(this)};e.hotkeyLetter&&(n.hotkeys=[{modifiers:["Mod","Shift"],key:e.hotkeyLetter}]),this.addCommand(n)}this.statusbar.addClass(this.cssclass),J(this),this.registerEvent(this.app.workspace.on("file-open",()=>J(this))),this.registerEvent(this.app.metadataCache.on("resolved",()=>J(this))),this.trashWatcherUninstaller=It(this),await this.loadSettings(),this.addSettingTab(new Pe(this)),ce(this),be(this),me(this.app),this.registerMarkdownCodeBlockProcessor(Q.codeOverview,(e,t)=>{t.innerHTML=ot(this),t.addClass(this.cssclass)}),this.registerMarkdownCodeBlockProcessor(Q.extractionOverview,(e,t)=>{t.innerHTML=bt(this,e),t.addClass(this.cssclass)}),window.CodeMirror.defineMode(Q.extractionOverview,e=>window.CodeMirror.getMode(e,"yaml"))}onunload(){this.trashWatcherUninstaller&&this.trashWatcherUninstaller(),window.CodeMirror.defineMode(Q.extractionOverview,e=>window.CodeMirror.getMode(e,"")),console.info(this.manifest.name+" Plugin unloaded.")}async loadSettings(){this.settings=ke({},N,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};

/* nosourcemap */